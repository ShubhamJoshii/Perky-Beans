import{r as i,N as S,j as e,b as x}from"./index-5c2fc0ab.js";import{A as P}from"./AdminSidebar-41cf2cd2.js";import{b as C}from"./index.esm-7d62f1ed.js";import{a as N}from"./index.prod-ffb4258e.js";import{P as U}from"./Pagination-c99fbaf4.js";import{O as y}from"./Blocks-c51b83d5.js";import"./index.esm-9d541a8c.js";import"./index.esm-96b25de3.js";import"./index.esm-d3d9663e.js";const O=()=>{const[s,j]=i.useState();i.useState(!1);const[m,o]=i.useState(!0),[d,f]=i.useState(1),{notification:n}=i.useContext(S),g=async(t,a)=>{o(!0),await x.post("/api/updateUserRole",{_id:t,Role:a}).then(l=>{l.data.result?(c(),n(l.data.message,"Success")):n(l.data.message,"Un-Success")}).catch(l=>{console.log(l)}).finally(()=>{o(!1)})},c=async()=>{o(!0),await x.get("/api/fetchUsers").then(t=>{var a;(a=t.data)!=null&&a.data&&j(t.data.data)}).catch(t=>{console.log("Error")}).finally(()=>{o(!1)})};i.useEffect(()=>{c()},[]);const p=async t=>{alert(t),await x.post("/api/deleteUser",{_id:t}).then(a=>{a.data.result?(n(a.data,"Success"),console.log(a.data),c()):n(a.data,"Un-Success")}).catch(a=>{console.log(a)})},r=8,u=Math.ceil((s==null?void 0:s.length)/r),b=t=>{f(t)},h=s==null?void 0:s.slice((d-1)*r,d*r);return e.jsxs("div",{className:"admin-container",children:[e.jsx(P,{}),e.jsxs("div",{className:"dashboard-product-box",children:[e.jsx("h2",{class:"heading",children:"Products"}),e.jsxs("table",{class:"table",role:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Email Verified"}),e.jsx("th",{children:"Admins"}),e.jsx("th",{children:"Delete"})]})}),m?e.jsx("td",{colSpan:"6",children:e.jsx(y,{height:"40",width:"60",color:"black",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"black",strokeWidth:4,strokeWidthSecondary:4})}):e.jsxs("tbody",{children:[h==null?void 0:h.map(t=>{const a=t.Role==="Admin";return e.jsxs("tr",{children:[e.jsx("td",{children:t.Full_Name}),e.jsx("td",{children:t.Email}),e.jsx("td",{children:t.Role}),e.jsx("td",{children:t.isVerified?e.jsx("p",{id:"verified",children:"Verified"}):e.jsx("p",{id:"not-verified",children:"Not-Verified"})}),e.jsx("td",{children:e.jsx(N,{onChange:()=>g(t._id,t.Role),checked:a,className:"react-switch"})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>p(t._id),children:e.jsx(C,{})})})]})}),!s&&e.jsx("p",{children:"No User Found"})]})]}),!m&&e.jsx(U,{currentPage:d,totalPages:u,onPageChange:b})]})]})};export{O as default};
