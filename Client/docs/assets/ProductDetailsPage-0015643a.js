import{r,d as b,U as W,N as T,j as t,R as k,b as l}from"./index-47fdb7de.js";import{O as N}from"./Blocks-c5b2fede.js";import{b as A,c as F}from"./index.esm-abaab865.js";import{G as P}from"./index.esm-1cfc3c5b.js";import{V as _,L as H}from"./veg-d019ba0c.js";import{B as M}from"./Bags-011b5033.js";import{C as V}from"./CustomerReview-51cf6883.js";import{F as E}from"./Footer-a418ad74.js";import{H as R}from"./Header-b10e3993.js";import"./index.esm-ab0caf0d.js";import"./index.esm-4bded9d9.js";import"./index.esm-9b895360.js";import"./index.esm-30a18ff2.js";function U(o){return P({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 11h-12c-1.104 0-2 .896-2 2s.896 2 2 2h12c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(o)}function G(o){return P({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 10h-4v-4c0-1.104-.896-2-2-2s-2 .896-2 2l.071 4h-4.071c-1.104 0-2 .896-2 2s.896 2 2 2l4.071-.071-.071 4.071c0 1.104.896 2 2 2s2-.896 2-2v-4.071l4 .071c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(o)}const O=()=>{var w;const[o,u]=r.useState(0),[i,h]=r.useState(0),[c,f]=r.useState(0),[s,y]=r.useState({}),[v,m]=r.useState("Show"),[B,g]=r.useState(!1);let x=b().productID;const{userData:a,setUserData:q}=r.useContext(W),{checkUserAlreadyLogin:p,notification:j}=r.useContext(T);r.useEffect(()=>{a==null||a.Bag.find(e=>{e.productID===s._id&&(u(e.SmallCount),h(e.MediumCount),f(e.LargeCount))})},[a]);const C=async()=>{m("Show"),await l.post("/api/fetchProductDetails",{_id:x}).then(e=>{y(e.data.data),m("Hide")}).catch(e=>{m("LoadBtnShow"),console.log(e)}).finally(()=>{})};r.useEffect(()=>{x&&C()},[x]);const n=[{id:1,name:"regular",price:(s==null?void 0:s.Price)-50,counter:o,setCounter:u},{id:2,name:"medium",price:s==null?void 0:s.Price,counter:i,setCounter:h},{id:3,name:"large",price:(s==null?void 0:s.Price)+50,counter:c,setCounter:f}],D=n[0].price*n[0].counter+n[1].price*n[1].counter+n[2].price*n[2].counter,I=async e=>{a?a.Wishlist.find(d=>d.productID===e)?await l.post("/api/removefromWishlist",{productID:e}).then(d=>{p()}):await l.post("/api/addToWishlist",{productID:e}).then(d=>{p()}):j("Please Login Before Adding to Wishlist","Warning")},L=async e=>{if(g(!0),a){let S=a.Bag.find(d=>d.productID===e);o||i||c>0?S?await l.post("/api/updateBag",{productID:e,SmallCount:o,MediumCount:i,LargeCount:c}).then(d=>{p()}):await l.post("/api/addtoBag",{productID:e,SmallCount:o,MediumCount:i,LargeCount:c}).then(d=>{}).catch(()=>{}).finally(()=>{p(),g(!1)}):j("firstly, Select Size","Warning")}else j("Please Login Before Adding to Bag","Warning");g(!1)};return t.jsxs(k.Fragment,{children:[t.jsx(M,{}),v==="Hide"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"products product-board",children:[t.jsxs("div",{className:"product-card",children:[t.jsx("div",{id:"product-img-BTN1",children:t.jsxs("div",{id:"onhover-showBTN1",children:[t.jsx("p",{id:"wishlist-para",children:"WISHLIST"}),t.jsx(A,{onClick:()=>I(s._id),className:a!=null&&a.Wishlist.find(e=>e.productID===s._id)?"active-Heart heart":"heart"})]})}),t.jsx("img",{className:"product-image",src:s.Product_Photo,alt:s.Product_Photo,loading:"lazy"}),t.jsxs("div",{className:"product-info",children:[t.jsx("h5",{className:"product-name",children:s.Product_Name}),t.jsxs("p",{className:"product-price",children:["₹",s.Price]}),t.jsxs("div",{className:"product-star",children:[t.jsx(F,{id:"A"}),t.jsxs("p",{className:"product-rating",children:[(w=Number(s.Rating))==null?void 0:w.toFixed(1),"/5.0"]})]})]})]},s._id),t.jsxs("div",{className:"product-board-desc",children:[t.jsxs("h1",{children:[s.Product_Name,s.type==="Veg"?t.jsx("img",{id:"veg",src:_,alt:"Veg"}):t.jsx(H,{id:"LuVegan"})]}),t.jsx("p",{children:s.Description}),t.jsxs("div",{className:"product-board-sizes",children:[t.jsx("h2",{children:"Select Sizes"}),t.jsx("div",{className:"sizes",children:n.map(e=>t.jsxs("div",{id:e.name,children:[t.jsx("img",{src:s.Product_Photo,alt:s.Product_Photo}),t.jsx("p",{children:e.name}),t.jsxs("p",{className:"product-price",children:["₹",e.price]}),t.jsxs("div",{className:"counter",children:[t.jsx("button",{className:"btn btn--minus",onClick:()=>{e.counter>0?e.setCounter(e.counter-1):e.setCounter(e.counter)},children:t.jsx(U,{})}),t.jsx("p",{children:e.name}),t.jsx("span",{children:e.counter}),t.jsx("button",{className:"btn btn--plus",onClick:()=>{e.counter<9?e.setCounter(e.counter+1):e.setCounter(e.counter)},children:t.jsx(G,{})})]})]},e.id))}),t.jsxs("div",{id:"totalorder",children:[t.jsx("div",{className:"total",children:t.jsxs("h1",{children:["Total Amount ₹ ",D]})}),B?t.jsx("button",{className:"order",children:t.jsx(N,{height:"18",width:"18",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:8,strokeWidthSecondary:8})}):t.jsx("button",{className:"order",style:o||i||c>0?{}:{background:"grey"},onClick:()=>L(s._id),children:"Add to Bag"})]})]})]})]}),t.jsx(V,{})]}):t.jsx(t.Fragment,{children:v==="Show"?t.jsx(N,{height:"40",width:"60",color:"white",wrapperStyle:{},wrapperClass:"products loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:4,strokeWidthSecondary:4}):t.jsxs("div",{className:"products loadingBTN",children:[t.jsx("p",{children:"Something went wrong"}),t.jsx("button",{onClick:C,children:"Try again"})]})})]})},ot=()=>{const[o,u]=r.useState({});let i=b().productID;const h=async()=>{await l.post("/api/fetchProductDetails",{_id:i}).then(c=>{u(c.data.data)}).catch(c=>{console.log(c)})};return r.useEffect(()=>{i&&h()},[i]),t.jsxs(t.Fragment,{children:[t.jsx(R,{}),t.jsx(O,{}),t.jsx(E,{})]})};export{ot as default};
