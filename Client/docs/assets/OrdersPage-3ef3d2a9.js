import{r as c,N as C,j as e,b as m,U as O,u as R,d as f,a as g}from"./index-8034329b.js";import{O as p,H as w}from"./Header-f9b55ae4.js";import{P as u,F as y}from"./Footer-50ddd481.js";import{S as E}from"./SearchBar-2431855b.js";import{a as v}from"./index.esm-3007911d.js";import{B as P}from"./Bags-1127a5c3.js";import"./index.esm-daad8c6f.js";import"./index.esm-f19b925b.js";import"./index.esm-4a30bd17.js";import"./index.esm-525efdad.js";import"./index.esm-e4be5a7f.js";const L=({product:s,orderData:r,ids:i,userData:j,setUserData:x})=>{const[o,l]=c.useState(null),[a,t]=c.useState(!1),{checkUserAlreadyLogin:d,notification:h}=c.useContext(C),n=async I=>{t(!0),await m.post("/api/cancelOrder",{productID:I}).then(S=>{S.data==="Product Ordered Cancelled"&&d(),t(!1)}).catch(()=>{})};return e.jsxs("div",{id:"orderProduct",children:[e.jsxs("div",{id:"orderCards",children:[e.jsxs("h4",{children:["ORDER ID : ",r._id.slice(0,10)]}),e.jsx("h2",{children:s.Name}),e.jsxs("div",{id:"orders-Product",children:[r.SmallCount>0&&e.jsxs("div",{children:[e.jsx("img",{src:s.Image,alt:"ProductImg"}),e.jsx("p",{children:"REGULAR"}),e.jsxs("p",{children:["₹ ",s.Price-50,"*",r.SmallCount]})]}),r.MediumCount>0&&e.jsxs("div",{children:[e.jsx("img",{src:s.Image,alt:"ProductImg"}),e.jsx("p",{children:"MEDIUM"}),e.jsxs("p",{children:["₹ ",s.Price,"*",r.MediumCount]})]}),r.LargeCount>0&&e.jsxs("div",{children:[e.jsx("img",{src:s.Image,alt:"ProductImg"}),e.jsx("p",{children:"REGULAR"}),e.jsxs("p",{children:["₹ ",s.Price+50,"*",r.LargeCount]})]})]}),e.jsxs("p",{id:"orderDesc",children:[s.Desc.slice(0,70),"..."]}),e.jsxs("div",{id:"btns",children:[e.jsx("button",{onClick:()=>n(r.productID),children:a?e.jsx(p,{height:"14",width:"14",color:"white",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx(e.Fragment,{children:"CANCEL"})}),e.jsx("button",{onClick:()=>{r.productID===o?l(null):l(r.productID)},children:"TRACK YOUR ORDER"})]})]}),o===r.productID?e.jsxs("div",{className:"track-order",children:[e.jsx(v,{id:"closeICON",onClick:()=>l(null)}),e.jsx("h3",{children:"TRACK YOUR ORDER"}),e.jsxs("div",{children:[e.jsx("div",{id:"Line"}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h5",{children:"ORDER CONFIRMED, 10th July 2023, 10:45 AM "}),e.jsx("p",{children:"Your Order has been placed."}),e.jsx("p",{children:"Chef is making your product ready."})]}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h4",{children:"ORDER SHIPPED at 10th July 2023, 11:10 AM "}),e.jsx("p",{children:"Perky Bean Logistics - FMPPQ934271"}),e.jsx("p",{children:"Your items has been shipped."})]}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h5",{children:"OUT FOR DELIVERY at 11:30 am"}),e.jsx("p",{children:"Your item is out for delivery"})]}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h5",{children:"DELIVERED by 12 am"})]})]})]}):e.jsx(e.Fragment,{})]})},k=({product:s,orderData:r,userData:i,setUserData:j})=>{const[x,o]=c.useState(!1),{checkUserAlreadyLogin:l}=c.useContext(C),a=async d=>{i.Wishlist.find(n=>n.productID===d)&&await m.post("/api/removefromWishlist",{productID:d}).then(n=>{l()})},t=async d=>{o(!0),i.Bag.find(n=>n.productID===d)||await m.post("/api/addtoBag",{productID:d,SmallCount:0,MediumCount:1,LargeCount:0}).then(n=>{l(),o(!1)}),setTimeout(()=>o(!1),1e3)};return e.jsxs("div",{id:"WishList-Card",children:[e.jsx("img",{src:s==null?void 0:s.Image,alt:"ImageProduct"}),e.jsxs("div",{id:"productDesc",children:[e.jsx("h2",{children:s==null?void 0:s.Name}),e.jsxs("p",{children:[s==null?void 0:s.Desc.slice(0,180),"..."]})]}),e.jsxs("h1",{children:["₹",s==null?void 0:s.Price]}),e.jsx(v,{id:"IconClose",onClick:()=>a(r.productID)}),e.jsx("button",{onClick:()=>t(r.productID),children:x?e.jsx(p,{height:"14",width:"14",color:"white",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx(e.Fragment,{children:i!=null&&i.Bag.find(d=>d.productID===r.productID)?e.jsx(e.Fragment,{children:" Added "}):e.jsx(e.Fragment,{children:"Add to Bag "})})})]})},b="/assets/scooter-cca3a519.png",F=()=>{var l,a;const[s,r]=c.useState(!0),{userData:i,setUserData:j}=c.useContext(O),x=R(),o=f();return c.useEffect(()=>{o.orders==="my-wishlist"?r(!1):r(!0)},[o]),e.jsxs(e.Fragment,{children:[e.jsx(E,{bgColor:"white"}),e.jsxs("div",{id:"Orders",children:[e.jsxs("div",{id:"order-wishlists",children:[e.jsx("h3",{onClick:()=>{x("/orders/my-order")},id:s?"active":"",children:"MY ORDERS"}),e.jsx("h3",{onClick:()=>{x("/orders/my-wishlist")},id:s?"":"active",children:"MY WISHLIST"})]}),i?e.jsx(e.Fragment,{children:s?e.jsx(e.Fragment,{children:(i==null?void 0:i.Orders.length)>0?e.jsx("div",{id:"orderCardsContainer",children:(l=i==null?void 0:i.Orders)==null?void 0:l.toReversed().map((t,d)=>{const h=u.find(n=>n._id===t.productID);return e.jsx(L,{product:h,orderData:t,ids:d,userData:i,setUserData:j},t+d)})}):e.jsx("div",{id:"orderCardsContainer",children:"No order is Placed till now"})}):e.jsx(e.Fragment,{children:(i==null?void 0:i.Wishlist.length)>0?e.jsx("div",{id:"wishlist",children:e.jsx("div",{id:"orderCardsContainer",children:(a=i==null?void 0:i.Wishlist)==null?void 0:a.toReversed().map((t,d)=>{const h=u.find(n=>n._id===t.productID);return e.jsx(k,{product:h,orderData:t,userData:i,setUserData:j},t+d)})})}):e.jsx("div",{id:"orderCardsContainer",children:"No Item Found"})})}):e.jsxs("div",{id:"orderCardsContainer",className:"userNotLogin",children:[e.jsxs("p",{children:["Sorry,the ",e.jsx("strong",{children:"ORDER"})," and ",e.jsx("strong",{children:"WISHLIST"})," is restricted to registered users only."]}),e.jsxs("p",{children:["please",e.jsx(g,{to:"/auth/register",children:" register"})," or ",e.jsx(g,{to:"/auth/login",children:"login"})," to continue."]})]})]}),e.jsx("img",{src:b,alt:"Scooter",id:"scooterIMG"}),e.jsx(P,{})]})},J=()=>e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx(F,{}),e.jsx(y,{})]});export{J as default};
