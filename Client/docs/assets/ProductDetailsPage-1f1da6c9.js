import{r,d as C,U as k,N as F,j as t,R as I,b as N}from"./index-e87a2a31.js";import{O as v}from"./Blocks-47291179.js";import{a as A,b as R}from"./index.esm-27a48223.js";import{G as S}from"./index.esm-c26df382.js";import{V as H,L as W}from"./veg-341085a6.js";import{B as E}from"./Bags-cb82ef9b.js";import{C as V}from"./CustomerReview-ca883710.js";import{F as M}from"./Footer-ff84bbfc.js";import{H as U}from"./Header-b26ccae5.js";import"./index.esm-ae7f451c.js";import"./index.esm-ed3e4fd2.js";import"./index-6551df55.js";import"./index.esm-1fc8a398.js";import"./index.esm-5750b471.js";function G(a){return S({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 11h-12c-1.104 0-2 .896-2 2s.896 2 2 2h12c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(a)}function O(a){return S({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 10h-4v-4c0-1.104-.896-2-2-2s-2 .896-2 2l.071 4h-4.071c-1.104 0-2 .896-2 2s.896 2 2 2l4.071-.071-.071 4.071c0 1.104.896 2 2 2s2-.896 2-2v-4.071l4 .071c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(a)}const q=()=>{var f;const[a,n]=r.useState(0),[o,d]=r.useState(0),[i,h]=r.useState(0),[s,w]=r.useState({}),[g,m]=r.useState("Show"),[P,J]=r.useState(!1);r.useState({});const[b,y]=r.useState(null);let p=C().productID;const{userData:l,setUserData:K,updateBag:B,fetchBag:Q,fetchWishList:_,addToBag:X,addToWishlist:D,bagData:u,wishlistData:x}=r.useContext(k);r.useContext(F),r.useEffect(()=>{l==null||l.Bag.find(e=>{e.productID===s._id&&(n(e.SmallCount),d(e.MediumCount),h(e.LargeCount))})},[l]);const j=async()=>{m("Show"),await N.post("/api/fetchProductDetails",{_id:p}).then(e=>{w(e.data.data),m("Hide"),y(e.data.data.Reviews),_()}).catch(e=>{m("LoadBtnShow"),console.log(e)}).finally(()=>{})};r.useEffect(()=>{const e=u==null?void 0:u.find(L=>L.productID===s._id);e&&(n(e.SmallCount),d(e.MediumCount),h(e.LargeCount))},[u,s]),r.useEffect(()=>{p&&j()},[p]);const c=[{id:1,name:"regular",price:(s==null?void 0:s.Price)-50,counter:a,setCounter:n},{id:2,name:"medium",price:s==null?void 0:s.Price,counter:o,setCounter:d},{id:3,name:"large",price:(s==null?void 0:s.Price)+50,counter:i,setCounter:h}],T=c[0].price*c[0].counter+c[1].price*c[1].counter+c[2].price*c[2].counter;return t.jsxs(I.Fragment,{children:[t.jsx(E,{}),g==="Hide"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"products product-board",children:[t.jsxs("div",{className:"product-card",children:[t.jsx("div",{id:"product-img-BTN1",children:t.jsxs("div",{id:"onhover-showBTN1",children:[t.jsx("p",{id:"wishlist-para",children:"WISHLIST"}),t.jsx(A,{onClick:()=>D(s._id),className:x!=null&&x.find(e=>e.productID===s._id)?"active-Heart heart":"heart"})]})}),t.jsx("img",{className:"product-image",src:s.Product_Photo,alt:s.Product_Photo,loading:"lazy"}),t.jsxs("div",{className:"product-info",children:[t.jsx("h5",{className:"product-name",children:s.Product_Name}),t.jsxs("p",{className:"product-price",children:["₹",s.Price]}),t.jsxs("div",{className:"product-star",children:[t.jsx(R,{id:"A"}),t.jsxs("p",{className:"product-rating",children:[(f=Number(s.Rating))==null?void 0:f.toFixed(1),"/5.0"]})]})]})]},s._id),t.jsxs("div",{className:"product-board-desc",children:[t.jsxs("h1",{children:[s.Product_Name,s.type==="Veg"?t.jsx("img",{id:"veg",src:H,alt:"Veg"}):t.jsx(W,{id:"LuVegan"})]}),t.jsx("p",{children:s.Description}),t.jsxs("div",{className:"product-board-sizes",children:[t.jsx("h2",{children:"Select Sizes"}),t.jsx("div",{className:"sizes",children:c.map(e=>t.jsxs("div",{id:e.name,children:[t.jsx("img",{src:s.Product_Photo,alt:s.Product_Photo}),t.jsx("p",{children:e.name}),t.jsxs("p",{className:"product-price",children:["₹",e.price]}),t.jsxs("div",{className:"counter",children:[t.jsx("button",{className:"btn btn--minus",onClick:()=>{e.counter>0?e.setCounter(e.counter-1):e.setCounter(e.counter)},children:t.jsx(G,{})}),t.jsx("p",{children:e.name}),t.jsx("span",{children:e.counter}),t.jsx("button",{className:"btn btn--plus",onClick:()=>{e.counter<9?e.setCounter(e.counter+1):e.setCounter(e.counter)},children:t.jsx(O,{})})]})]},e.id))}),t.jsxs("div",{id:"totalorder",children:[t.jsx("div",{className:"total",children:t.jsxs("h1",{children:["Total Amount ₹ ",T]})}),P?t.jsx("button",{className:"order",children:t.jsx(v,{height:"18",width:"18",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:8,strokeWidthSecondary:8})}):t.jsx("button",{className:"order",style:a||o||i>0?{}:{background:"grey"},onClick:()=>B(s._id,a,o,i),children:"Add to Bag"})]})]})]})]}),t.jsx(V,{Review:b})]}):t.jsx(t.Fragment,{children:g==="Show"?t.jsx(v,{height:"40",width:"60",color:"white",wrapperStyle:{},wrapperClass:"products loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:4,strokeWidthSecondary:4}):t.jsxs("div",{className:"products loadingBTN",children:[t.jsx("p",{children:"Something went wrong"}),t.jsx("button",{onClick:j,children:"Try again"})]})})]})},lt=()=>{const[a,n]=r.useState({});let o=C().productID;const d=async()=>{await N.post("/api/fetchProductDetails",{_id:o}).then(i=>{n(i.data.data)}).catch(i=>{console.log(i)})};return r.useEffect(()=>{o&&d()},[o]),t.jsxs(t.Fragment,{children:[t.jsx(U,{}),t.jsx(q,{}),t.jsx(M,{})]})};export{lt as default};
