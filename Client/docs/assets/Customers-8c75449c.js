import{r as i,N as S,j as e,b as x}from"./index-cbe3fdec.js";import{A as P}from"./AdminSidebar-57c3431d.js";import{b as C}from"./index.esm-76ea1b92.js";import{a as N,P as U}from"./Pagination-11d57633.js";import{O as y}from"./Blocks-a4e89473.js";import"./index.esm-a1d35d51.js";import"./index.esm-3905661c.js";const F=()=>{const[s,m]=i.useState();i.useState(!1);const[j,n]=i.useState(!0),[o,f]=i.useState(1),{notification:d}=i.useContext(S),g=async(t,a)=>{n(!0),await x.post("/api/updateUserRole",{_id:t,Role:a}).then(l=>{l.data.result?(c(),d(l.data.message,"Success")):d(l.data.message,"Un-Success")}).catch(l=>{console.log(l)}).finally(()=>{n(!1)})},c=async()=>{n(!0),await x.get("/api/fetchUsers").then(t=>{var a;(a=t.data)!=null&&a.data&&m(t.data.data)}).catch(t=>{console.log("Error")}).finally(()=>{n(!1)})};i.useEffect(()=>{c()},[]);const p=async t=>{alert(t),await x.post("/api/deleteUser",{_id:t}).then(a=>{a.data.result?(d(a.data,"Success"),console.log(a.data),c()):d(a.data,"Un-Success")}).catch(a=>{console.log(a)})},r=8,u=Math.ceil((s==null?void 0:s.length)/r),b=t=>{f(t)},h=s==null?void 0:s.slice((o-1)*r,o*r);return e.jsxs("div",{className:"admin-container",children:[e.jsx(P,{}),e.jsxs("div",{className:"dashboard-product-box",children:[e.jsx("h2",{class:"heading",children:"Products"}),e.jsxs("table",{class:"table",role:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Email Verified"}),e.jsx("th",{children:"Admins"}),e.jsx("th",{children:"Delete"})]})}),j?e.jsx("td",{colSpan:"6",children:e.jsx(y,{height:"40",width:"60",color:"black",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"black",strokeWidth:4,strokeWidthSecondary:4})}):e.jsxs("tbody",{children:[h==null?void 0:h.map(t=>{const a=t.Role==="Admin";return e.jsxs("tr",{children:[e.jsx("td",{children:t.Full_Name}),e.jsx("td",{children:t.Email}),e.jsx("td",{children:t.Role}),e.jsx("td",{children:t.isVerified?e.jsx("p",{id:"verified",children:"Verified"}):e.jsx("p",{id:"not-verified",children:"Not-Verified"})}),e.jsx("td",{children:e.jsx(N,{onChange:()=>g(t._id,t.Role),checked:a,className:"react-switch"})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>p(t._id),children:e.jsx(C,{})})})]})}),!s&&e.jsx("p",{children:"No User Found"})]})]}),!j&&e.jsx(U,{currentPage:o,totalPages:u,onPageChange:b})]})]})};export{F as default};
