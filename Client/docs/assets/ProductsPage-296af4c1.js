import{r as t,U as y,N as A,j as e,a as H,b as w,d as D,e as W,R as U}from"./index-04e2cc78.js";import{B as V}from"./Bags-ee286a22.js";import{F as E}from"./Footer-06ddb071.js";import{H as O}from"./Header-71da15e5.js";import{a as G,b as q,c as z,d as J}from"./index.esm-929f7591.js";import{$ as K}from"./module-36a6d8f5.js";import{a as M}from"./index.esm-ddfda7c0.js";import{V as Q,L as X}from"./veg-1dc9c496.js";import{S as g}from"./index-c2168812.js";/* empty css                 */import{S as Y}from"./SearchBar-269d7d14.js";import"./index.esm-28aa77ef.js";import"./index.esm-825d002b.js";import"./index.esm-da0dab77.js";import"./index.esm-1ecf3452.js";import"./index.esm-df63370e.js";const Z=({product:a,category:o})=>{const{fetchBag:d,addToWishlist:m,bagData:i,wishlistData:h}=t.useContext(y),{notification:c}=t.useContext(A);let j;o!=null&&o.categoryID?j=`./${a==null?void 0:a._id}`:j=`./${a==null?void 0:a.Category}/${a==null?void 0:a._id}`;const P=async(n,S=0,C=1,F=0)=>{i.find(l=>l.productID===n)?await w.post("/api/removeFromBag",{productID:n}).then(l=>{c(l.data,"Success"),d()}):await w.post("/api/updateBag",{productID:n,SmallCount:S,MediumCount:C,LargeCount:F}).then(l=>{c(l.data,"Success"),d()}).catch(l=>{c(l.response.data.msg2,"Warning")})};return e.jsxs("div",{className:"product-card",children:[e.jsx("div",{id:"product-type",children:a!=null&&a.type?e.jsx(e.Fragment,{children:(a==null?void 0:a.type)==="Veg"?e.jsx("img",{id:"veg",src:Q,alt:"Veg"}):e.jsx(X,{id:"LuVegan"})}):e.jsx(g,{})}),e.jsx("div",{id:"product-img-BTN1",children:e.jsx("div",{id:"onhover-showBTN1",children:a!=null&&a.Product_Name?e.jsxs(e.Fragment,{children:[e.jsx("p",{id:"wishlist-para",children:"WISHLIST"}),e.jsx(G,{onClick:()=>m(a==null?void 0:a._id),className:h.find(n=>n.productID===(a==null?void 0:a._id))?"active-Heart heart":" heart"})]}):e.jsx(g,{})})}),e.jsx("div",{id:"product-img-BTN2",children:e.jsx("div",{id:"onhover-showBTN2",children:a!=null&&a.Product_Name?e.jsxs(e.Fragment,{children:[e.jsx("p",{id:"bag-para",children:"BAG"}),e.jsx(M,{onClick:()=>P(a==null?void 0:a._id),className:i.find(n=>n.productID===(a==null?void 0:a._id))?"active-Bags bag":"bag"})]}):e.jsx(g,{})})}),e.jsxs(H,{to:j,id:"Product-Image-Link",onClick:()=>window.scrollTo({top:0,left:0,behavior:"smooth"}),children:[a!=null&&a.Product_Photo?e.jsx("img",{src:a==null?void 0:a.Product_Photo,alt:a==null?void 0:a.Product_Name,className:"product-image"}):e.jsx(g,{className:"skeleton"}),e.jsxs("div",{className:"product-info",children:[e.jsx("h5",{className:"product-name",children:(a==null?void 0:a.Product_Name)||e.jsx(g,{})}),e.jsx("p",{className:"product-desc",children:a!=null&&a.Description?e.jsxs(e.Fragment,{children:[a==null?void 0:a.Description.slice(0,60),"..."]}):e.jsx(g,{count:3})}),e.jsx("p",{className:"product-price",children:a!=null&&a.Price?e.jsxs(e.Fragment,{children:["â‚¹",a==null?void 0:a.Price]}):e.jsx(g,{})}),e.jsx("div",{id:"rating",children:a!=null&&a.Rating?e.jsxs(e.Fragment,{children:[e.jsx(q,{id:"A"}),e.jsxs("p",{className:"product-rating",children:[Number(a==null?void 0:a.Rating).toFixed(1),"/5.0"]})]}):e.jsx(g,{})})]})]})]})},p=()=>{let o=Array.from({length:24},(s,r)=>{});const[d,m]=t.useState(o),[i,h]=t.useState(1),[c,j]=t.useState(D()),{fetchBag:P,fetchWishList:n,addToWishlist:S,bagData:C,wishlistData:F}=t.useContext(y),[L,l]=t.useState([]),[B,v]=t.useState("Hide"),[f,T]=t.useState(1),b=W(),$=async()=>{var r,k;m(o);let s=b.state;if(b.state!==null&&(s.Category||s.Ingredients||s.PriceRange||s.RatingUP)){let x=(r=s==null?void 0:s.Category)==null?void 0:r.toLocaleString(),R=(k=s==null?void 0:s.Ingredients)==null?void 0:k.toLocaleString(),I=s==null?void 0:s.PriceRange,_=s==null?void 0:s.RatingUP;await w.get(`/api/fetchProduct?page=${i}&limit=24&Category=${x}&Ingredients=${R}&PriceRange=${I}&RatingUP=${_}&Available=true`).then(N=>{m(N.data.data),T(N.data.TotalproductsPages),N.data.TotalproductsPages<24*i&&h(1),v("Hide"),P(),n()}).catch(N=>{v("LoadBtnShow"),console.log("Error")})}else await w.get(`/api/fetchProduct?page=${i}&limit=24&Available=true`).then(x=>{m(x.data.data),T(x.data.TotalproductsPages),v("Hide"),P(),n()}).catch(x=>{v("LoadBtnShow"),console.log("Error")})};return t.useEffect(()=>{$()},[b,L,i]),e.jsx(e.Fragment,{children:B==="Hide"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"products",children:d.map((s,r)=>e.jsx(U.Fragment,{children:e.jsx(Z,{product:s,category:c})},r))}),e.jsx("div",{id:"pagination",children:f.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"Pages",id:i===1?"non-active-side-btn":"",onClick:()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),i!==1&&h(i-1)},children:e.jsx(z,{})}),f.map((s,r)=>e.jsx("div",{onClick:()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),h(s)},className:r+1===i?"activePage Pages":"Pages",children:s},r)),e.jsx("div",{className:"Pages",id:i===f.length?"non-active-side-btn":"",onClick:()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),i!==f.length&&h(i+1)},children:e.jsx(J,{})})]})})]}):e.jsx(e.Fragment,{children:B==="Show"?e.jsx(K,{height:"40",width:"60",color:"white",wrapperStyle:{},wrapperClass:"products loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:4,strokeWidthSecondary:4}):e.jsxs("div",{className:"products loadingBTN",children:[e.jsx("p",{children:"Something went wrong"}),e.jsx("button",{onClick:$,children:"Try again"})]})})})},je=()=>e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsx(V,{}),e.jsx(Y,{position:"100",currPlace:"ProductPage"}),e.jsx(p,{}),e.jsx(E,{})]});export{je as default};
