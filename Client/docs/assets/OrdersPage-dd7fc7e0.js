import{r as t,N as O,j as e,b as S,U as y,u as P,d as R,a as I}from"./index-cbe3fdec.js";import{H as p}from"./Header-6d6a280a.js";import{F as k}from"./Footer-c4c6fd8e.js";import{S as E}from"./SearchBar-0fe9641b.js";import{a as u}from"./index.esm-a1d35d51.js";import{O as w}from"./Blocks-a4e89473.js";import{B as b}from"./Bags-d36cee3e.js";import"./index.esm-7b03ea70.js";import"./index.esm-513a21a3.js";import"./index.esm-3905661c.js";import"./index.esm-24426d4d.js";import"./index.esm-76ea1b92.js";const L=({product:s,orderData:r,ids:i,userData:m,setUserData:l})=>{const[h,a]=t.useState(null),[c,x]=t.useState(!1),{checkUserAlreadyLogin:d,notification:j}=t.useContext(O),o=async g=>{x(!0),await S.post("/api/cancelOrder",{productID:g}).then(n=>{n.data==="Product Ordered Cancelled"&&d()}).catch(n=>{console.log(n)}).finally(()=>{x(!1)})};return e.jsxs("div",{id:"orderProduct",children:[e.jsxs("div",{id:"orderCards",children:[e.jsxs("h4",{children:["ORDER ID : ",r._id.slice(0,10)]}),e.jsx("h2",{children:s==null?void 0:s.Product_Name}),e.jsxs("div",{id:"orders-Product",children:[r.SmallCount>0&&e.jsxs("div",{children:[e.jsx("img",{src:s==null?void 0:s.Product_Photo,alt:"ProductImg"}),e.jsx("p",{children:"REGULAR"}),e.jsxs("p",{children:["₹ ",(s==null?void 0:s.Price)-50,"*",r.SmallCount]})]}),r.MediumCount>0&&e.jsxs("div",{children:[e.jsx("img",{src:s==null?void 0:s.Product_Photo,alt:"ProductImg"}),e.jsx("p",{children:"MEDIUM"}),e.jsxs("p",{children:["₹ ",s==null?void 0:s.Price,"*",r.MediumCount]})]}),r.LargeCount>0&&e.jsxs("div",{children:[e.jsx("img",{src:s==null?void 0:s.Product_Photo,alt:"ProductImg"}),e.jsx("p",{children:"REGULAR"}),e.jsxs("p",{children:["₹ ",(s==null?void 0:s.Price)+50,"*",r.LargeCount]})]})]}),e.jsxs("p",{id:"orderDesc",children:[s==null?void 0:s.Description.slice(0,70),"..."]}),e.jsxs("div",{id:"btns",children:[e.jsx("button",{onClick:()=>o(r.productID),children:c?e.jsx(w,{height:"14",width:"14",color:"white",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx(e.Fragment,{children:"CANCEL"})}),e.jsx("button",{onClick:()=>{r.productID===h?a(null):a(r.productID)},children:"TRACK YOUR ORDER"})]})]}),h===r.productID?e.jsxs("div",{className:"track-order",children:[e.jsx(u,{id:"closeICON",onClick:()=>a(null)}),e.jsx("h3",{children:"TRACK YOUR ORDER"}),e.jsxs("div",{children:[e.jsx("div",{id:"Line"}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h5",{children:"ORDER CONFIRMED, 10th July 2023, 10:45 AM "}),e.jsx("p",{children:"Your Order has been placed."}),e.jsx("p",{children:"Chef is making your product ready."})]}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h4",{children:"ORDER SHIPPED at 10th July 2023, 11:10 AM "}),e.jsx("p",{children:"Perky Bean Logistics - FMPPQ934271"}),e.jsx("p",{children:"Your items has been shipped."})]}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h5",{children:"OUT FOR DELIVERY at 11:30 am"}),e.jsx("p",{children:"Your item is out for delivery"})]}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h5",{children:"DELIVERED by 12 am"})]})]})]}):e.jsx(e.Fragment,{})]})},F=({product:s,orderData:r,userData:i,setUserData:m})=>{const[l,h]=t.useState(!1),{checkUserAlreadyLogin:a}=t.useContext(O),c=async d=>{i.Wishlist.find(o=>o.productID===d)&&await S.post("/api/removefromWishlist",{productID:d}).then(o=>{a()})},x=async d=>{h(!0),i.Bag.find(o=>o.productID===d)||await S.post("/api/addtoBag",{productID:d,SmallCount:0,MediumCount:1,LargeCount:0}).then(o=>{a(),h(!1)}),setTimeout(()=>h(!1),1e3)};return e.jsxs("div",{id:"WishList-Card",children:[e.jsx("img",{src:s==null?void 0:s.Product_Photo,alt:"ImageProduct"}),e.jsxs("div",{id:"productDesc",children:[e.jsx("h2",{children:s==null?void 0:s.Product_Name}),e.jsxs("p",{children:[s==null?void 0:s.Description.slice(0,180),"..."]})]}),e.jsxs("h1",{children:["₹",s==null?void 0:s.Price]}),e.jsx(u,{id:"IconClose",onClick:()=>c(r.productID)}),e.jsx("button",{onClick:()=>x(r.productID),children:l?e.jsx(w,{height:"14",width:"14",color:"white",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx(e.Fragment,{children:i!=null&&i.Bag.find(d=>d.productID===r.productID)?e.jsx(e.Fragment,{children:" Added "}):e.jsx(e.Fragment,{children:"Add to Bag "})})})]})},N="/assets/scooter-cca3a519.png",D=()=>{var o,g;const[s,r]=t.useState(!0),{userData:i,setUserData:m}=t.useContext(y),[l,h]=t.useState(null),[a,c]=t.useState("Show"),x=P(),d=R(),j=async()=>{c("Show"),await S.post("/api/fetchProduct",{Available:!1}).then(n=>{h(n.data.data),c("Hide")}).catch(n=>{console.log("Error"),c("LoadBtnShow")})};return t.useEffect(()=>{j()},[]),t.useEffect(()=>{d.orders==="my-wishlist"?r(!1):r(!0)},[d]),e.jsxs(e.Fragment,{children:[e.jsx(E,{bgColor:"white"}),e.jsxs("div",{id:"Orders",children:[e.jsxs("div",{id:"order-wishlists",children:[e.jsx("h3",{onClick:()=>{x("/orders/my-order")},id:s?"active":"",children:"MY ORDERS"}),e.jsx("h3",{onClick:()=>{x("/orders/my-wishlist")},id:s?"":"active",children:"MY WISHLIST"})]}),a==="Hide"?e.jsx(e.Fragment,{children:i?e.jsx(e.Fragment,{children:s?e.jsx(e.Fragment,{children:(i==null?void 0:i.Orders.length)>0?e.jsx("div",{id:"orderCardsContainer",children:(o=i==null?void 0:i.Orders)==null?void 0:o.toReversed().map((n,C)=>{const v=l==null?void 0:l.find(f=>f._id===n.productID);return console.log(v),e.jsx(L,{product:v,orderData:n,ids:C,userData:i,setUserData:m},n+C)})}):e.jsx("div",{id:"orderCardsContainer",children:"No order is Placed till now"})}):e.jsx(e.Fragment,{children:(i==null?void 0:i.Wishlist.length)>0?e.jsx("div",{id:"wishlist",children:e.jsx("div",{id:"orderCardsContainer",children:(g=i==null?void 0:i.Wishlist)==null?void 0:g.toReversed().map((n,C)=>{const v=l==null?void 0:l.find(f=>f._id===n.productID);return e.jsx(F,{product:v,orderData:n,userData:i,setUserData:m},n+C)})})}):e.jsx("div",{id:"orderCardsContainer",children:"No Item Found"})})}):e.jsxs("div",{id:"orderCardsContainer",className:"userNotLogin",children:[e.jsxs("p",{children:["Sorry,the ",e.jsx("strong",{children:"ORDER"})," and ",e.jsx("strong",{children:"WISHLIST"})," is restricted to registered users only."]}),e.jsxs("p",{children:["please",e.jsx(I,{to:"/auth/register",children:" register"})," or ",e.jsx(I,{to:"/auth/login",children:"login"})," to continue."]})]})}):e.jsx(e.Fragment,{children:a==="Show"?e.jsx("div",{id:"orderCardsContainer",children:e.jsx(w,{height:"40",width:"60",color:"black",wrapperStyle:{marginTop:"100px"},wrapperClass:"orderProduct loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:4,strokeWidthSecondary:4})}):e.jsx("div",{id:"orderCardsContainer",children:e.jsxs("div",{className:"loadingBTN",children:[e.jsx("p",{children:"Something went wrong"}),e.jsx("button",{onClick:j,children:"Try again"})]})})})]}),e.jsx("img",{src:N,alt:"Scooter",id:"scooterIMG"}),e.jsx(b,{})]})},V=()=>e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx(D,{}),e.jsx(k,{})]});export{V as default};
