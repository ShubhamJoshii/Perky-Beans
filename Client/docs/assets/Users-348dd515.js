import{r as i,N as S,j as e,b as x}from"./index-0f8cf5bd.js";import{A as U}from"./AdminSidebar-6e748e34.js";import{b as N}from"./index.esm-6e31662f.js";import{a as P}from"./index.prod-ee2d8f9e.js";import{P as y}from"./Pagination-537571fb.js";import{$ as C}from"./module-17f79e7b.js";import"./index.esm-bd982d43.js";import"./index.esm-cb6a9f8e.js";import"./index.esm-a27cb57a.js";const L=()=>{const[s,m]=i.useState();i.useState(!1);const[j,d]=i.useState(!0),[o,f]=i.useState(1),{notification:n}=i.useContext(S),g=async(t,a)=>{d(!0),await x.post("/api/updateUserRole",{_id:t,Role:a}).then(l=>{l.data.result?(c(),n(l.data.message,"Success")):n(l.data.message,"Un-Success")}).catch(l=>{console.log(l)}).finally(()=>{d(!1)})},c=async()=>{d(!0),await x.get("/api/fetchUsers").then(t=>{var a;(a=t.data)!=null&&a.data&&m(t.data.data)}).catch(t=>{console.log("Error")}).finally(()=>{d(!1)})};i.useEffect(()=>{c()},[]);const p=async t=>{alert(t),await x.post("/api/deleteUser",{_id:t}).then(a=>{a.data.result?(n(a.data,"Success"),console.log(a.data),c()):n(a.data,"Un-Success")}).catch(a=>{console.log(a)})},r=8,b=Math.ceil((s==null?void 0:s.length)/r),u=t=>{f(t)},h=s==null?void 0:s.slice((o-1)*r,o*r);return e.jsxs("div",{className:"admin-container",children:[e.jsx(U,{}),e.jsxs("div",{className:"dashboard-product-box",children:[e.jsx("h2",{class:"heading",children:"Users"}),e.jsxs("table",{class:"table",role:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Email Verified"}),e.jsx("th",{children:"Admins"}),e.jsx("th",{children:"Delete"})]})}),j?e.jsx("td",{colSpan:"6",children:e.jsx(C,{height:"40",width:"60",color:"black",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"black",strokeWidth:4,strokeWidthSecondary:4})}):e.jsxs("tbody",{children:[h==null?void 0:h.map(t=>{const a=t.Role==="Admin";return e.jsxs("tr",{children:[e.jsx("td",{children:t.Full_Name}),e.jsx("td",{children:t.Email}),e.jsx("td",{children:t.Role}),e.jsx("td",{children:t.isVerified?e.jsx("p",{id:"verified",children:"Verified"}):e.jsx("p",{id:"not-verified",children:"Not-Verified"})}),e.jsx("td",{children:e.jsx(P,{onChange:()=>g(t._id,t.Role),checked:a,className:"react-switch"})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>p(t._id),children:e.jsx(N,{})})})]})}),!s&&e.jsx("p",{children:"No User Found"})]})]}),!j&&e.jsx(y,{currentPage:o,totalPages:b,onPageChange:u})]})]})};export{L as default};
