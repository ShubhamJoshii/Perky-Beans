import{r as i,N as S,j as e,b as x}from"./index-98f0d127.js";import{A as U}from"./AdminSidebar-01459f2e.js";import{b as N}from"./index.esm-e83a1523.js";import{a as P}from"./index.prod-b1635b59.js";import{P as y}from"./Pagination-a4ff656c.js";import{O as C}from"./Blocks-3465ce0c.js";import"./index.esm-79fba085.js";import"./index.esm-d04a934b.js";import"./index.esm-3249597b.js";const O=()=>{const[a,m]=i.useState();i.useState(!1);const[j,n]=i.useState(!0),[d,f]=i.useState(1),{notification:o}=i.useContext(S),g=async(t,s)=>{n(!0),await x.post("/api/updateUserRole",{_id:t,Role:s}).then(l=>{l.data.result?(c(),o(l.data.message,"Success")):o(l.data.message,"Un-Success")}).catch(l=>{console.log(l)}).finally(()=>{n(!1)})},c=async()=>{n(!0),await x.get("/api/fetchUsers").then(t=>{var s;(s=t.data)!=null&&s.data&&m(t.data.data)}).catch(t=>{console.log("Error")}).finally(()=>{n(!1)})};i.useEffect(()=>{c()},[]);const p=async t=>{alert(t),await x.post("/api/deleteUser",{_id:t}).then(s=>{s.data.result?(o(s.data,"Success"),console.log(s.data),c()):o(s.data,"Un-Success")}).catch(s=>{console.log(s)})},r=8,u=Math.ceil((a==null?void 0:a.length)/r),b=t=>{f(t)},h=a==null?void 0:a.slice((d-1)*r,d*r);return e.jsxs("div",{className:"admin-container",children:[e.jsx(U,{}),e.jsxs("div",{className:"dashboard-product-box",children:[e.jsx("h2",{class:"heading",children:"Users"}),e.jsxs("table",{class:"table",role:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Email Verified"}),e.jsx("th",{children:"Admins"}),e.jsx("th",{children:"Delete"})]})}),j?e.jsx("td",{colSpan:"6",children:e.jsx(C,{height:"40",width:"60",color:"black",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"black",strokeWidth:4,strokeWidthSecondary:4})}):e.jsxs("tbody",{children:[h==null?void 0:h.map(t=>{const s=t.Role==="Admin";return e.jsxs("tr",{children:[e.jsx("td",{children:t.Full_Name}),e.jsx("td",{children:t.Email}),e.jsx("td",{children:t.Role}),e.jsx("td",{children:t.isVerified?e.jsx("p",{id:"verified",children:"Verified"}):e.jsx("p",{id:"not-verified",children:"Not-Verified"})}),e.jsx("td",{children:e.jsx(P,{onChange:()=>g(t._id,t.Role),checked:s,className:"react-switch"})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>p(t._id),children:e.jsx(N,{})})})]})}),!a&&e.jsx("p",{children:"No User Found"})]})]}),!j&&e.jsx(y,{currentPage:d,totalPages:u,onPageChange:b})]})]})};export{O as default};
