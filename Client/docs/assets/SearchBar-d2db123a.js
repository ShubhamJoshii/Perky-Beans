import{r as x,u as b,e as E,j as e,b as F,a as M}from"./index-ed1235f5.js";import{B as $}from"./index.esm-e430d503.js";import{c as P,d as T,e as A}from"./index.esm-7e255ccb.js";import{M as U,a as D}from"./Header-47268997.js";import{b as h}from"./index.esm-51f27fd1.js";import{G as B,b as H}from"./index.esm-9f69718b.js";import{$ as V}from"./module-6d8f6cfb.js";function z(m){return B({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M17.47 250.9C88.82 328.1 158 397.6 224.5 485.5c72.3-143.8 146.3-288.1 268.4-444.37L460 26.06C356.9 135.4 276.8 238.9 207.2 361.9c-48.4-43.6-126.62-105.3-174.38-137z"}}]})(m)}const j="/assets/Beverages-64cde32f.png",k=[{Topic:"Category",subTopic:[{image:j,text:"Muffins",apiName:"Muffins"},{image:j,text:"Beverages",apiName:"Beverages"},{image:j,text:"Pizza",apiName:"Pizza"},{image:j,text:"Snacks and Sides",apiName:"SnacksAndSides"},{image:j,text:"Smoothie & Ice Cream",apiName:"Smoothie"}]},{Topic:"Ingredients",subTopic:[{image:j,text:"Vegetarian",apiName:"Veg"},{image:j,text:"Vegan",apiName:"Vegan"}]}],O=({showFilterBox:m,setShowFilterBox:v})=>{const[t,r]=x.useState({Category:[],Ingredients:[],PriceRange:599,RatingUP:1}),[f,C]=x.useState(!1),u=x.useRef(null),N=b(),S=()=>{let a=t.Category.map(s=>s.apiName),i=t.Ingredients.map(s=>s.apiName);N("/products",{state:{Category:a,Ingredients:i,PriceRange:t.PriceRange,RatingUP:t.RatingUP}}),v(!1)},n=E();return x.useEffect(()=>{var s,g;let a=[],i=[];if((s=n==null?void 0:n.state)!=null&&s.Category){let p=n.state.Category;k.map(c=>{c.Topic==="Category"&&c.subTopic.map(o=>{o.apiName.includes(p)&&a.push(o)})})}if((g=n==null?void 0:n.state)!=null&&g.Ingredients){let p=n.state.Ingredients;k.map(c=>{c.Topic==="Ingredients"&&c.subTopic.map(o=>{o.apiName.includes(p)&&i.push(o)})})}r({...t,Ingredients:i,Category:a})},[n]),x.useEffect(()=>{const a=i=>{u.current&&!u.current.contains(i.target)&&v(!1)};return document.addEventListener("click",a,!0),()=>{document.removeEventListener("click",a,!0)}},[m]),e.jsx(e.Fragment,{children:m?e.jsxs("div",{className:"filter",children:[e.jsxs("div",{className:"box",children:[e.jsxs("div",{className:"header",children:[e.jsx(H,{className:"ArrowBack",onClick:()=>v(!m)}),e.jsx("h3",{children:"Filter"}),e.jsx("p",{className:"reset",onClick:()=>r({Category:[],Ingredients:[]}),children:"Reset"})]}),k.map((a,i)=>e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"topic",children:[e.jsx("h4",{children:a.Topic}),e.jsx(P,{className:"show-More"})]}),e.jsx("div",{className:"category-topic-container",children:a.subTopic.map(s=>e.jsxs("button",{className:"category-topic",id:t.Category.concat(t.Ingredients).find(g=>g.text===s.text)?"active":"",onClick:()=>{var g,p;if(a.Topic==="Category"){let c;(g=t==null?void 0:t.Category)!=null&&g.find(o=>o.text===s.text)&&t.Category.length>0?c=t.Category.filter(o=>o.text!==s.text):c=[...t.Category,s],r({...t,Category:c})}if(a.Topic==="Ingredients"){let c;(p=t==null?void 0:t.Ingredients)!=null&&p.find(o=>o.text===s.text)&&t.Ingredients.length>0?c=t.Ingredients.filter(o=>o.text!==s.text):c=[...t.Ingredients,s],r({...t,Ingredients:c})}},children:[e.jsx("img",{src:s.image,alt:"muffinsImage",id:"filterProductImage"}),e.jsx("p",{children:s.text}),t.Category.concat(t.Ingredients).find(g=>g.text===s.text)&&e.jsx(z,{className:"checkLOGO"})]},s.text))})]},a+i)),e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"topic",children:[e.jsx("h4",{children:"Price Range"}),e.jsxs("div",{children:[e.jsxs("p",{children:["₹80 - ₹",t.PriceRange]}),f?e.jsx(P,{className:"show-More",onClick:()=>{C(!f)}}):e.jsx(T,{className:"show-More",onClick:()=>{C(!f)}})]})]}),e.jsx("input",{type:"range",name:"price",id:"price",min:"80",defaultValue:t.PriceRange,max:"599",onChange:a=>{r({...t,PriceRange:a.target.value})}}),f&&e.jsxs("div",{id:"furtherPrice",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"PriceLow",children:"Low to High"}),e.jsx("input",{type:"radio",name:"Price",id:"PriceLow"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"PriceHigh",children:"High to Low"}),e.jsx("input",{type:"radio",name:"Price",id:"PriceHigh"})]})]})]}),e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"topic",children:[e.jsx("h4",{children:"Customer Review"}),e.jsx(P,{className:"show-More"})]}),e.jsxs("div",{className:"review-wrapper",children:[e.jsxs("div",{className:"subwrapper",children:[e.jsxs("label",{htmlFor:"4Star",children:[e.jsx(h,{}),e.jsx(h,{}),e.jsx(h,{}),e.jsx(h,{}),e.jsx("p",{children:"& up"})]}),e.jsx("input",{type:"radio",name:"Star",id:"4Star",onClick:()=>r({...t,RatingUP:4})})]}),e.jsxs("div",{className:"subwrapper",children:[e.jsxs("label",{htmlFor:"3Star",children:[e.jsx(h,{}),e.jsx(h,{}),e.jsx(h,{}),e.jsx("p",{children:"& up"})]}),e.jsx("input",{type:"radio",name:"Star",id:"3Star",onClick:()=>r({...t,RatingUP:3})})]}),e.jsxs("div",{className:"subwrapper",children:[e.jsxs("label",{htmlFor:"2Star",children:[e.jsx(h,{}),e.jsx(h,{}),e.jsx("p",{children:"& up"})]}),e.jsx("input",{type:"radio",name:"Star",id:"2Star",onClick:()=>r({...t,RatingUP:2})})]}),e.jsxs("div",{className:"subwrapper",children:[e.jsxs("label",{htmlFor:"1Star",children:[e.jsx(h,{}),e.jsx("p",{children:"& up"})]}),e.jsx("input",{type:"radio",name:"Star",id:"1Star",defaultChecked:!0,onClick:()=>r({...t,RatingUP:1})})]})]})]})]}),e.jsx("div",{className:"selections",children:t.Category.concat(t.Ingredients).map((a,i)=>e.jsxs("button",{className:"btn",children:[e.jsx("img",{src:a.image,alt:"muffinsImage"}),e.jsx("p",{children:a.text}),e.jsx(A,{className:"CutBTN",onClick:()=>{t.Category.find(s=>s.text===a.text)?r({Ingredients:t.Ingredients,Category:[...t.Category.filter(s=>s.text!==a.text)]}):r({Category:t.Category,Ingredients:[...t.Ingredients.filter(s=>s.text!==a.text)]})}})]},a.text+i))}),e.jsx("button",{className:"showResult",onClick:S,children:"Show results"})]}):v(m)})},J=({position:m,currPlace:v,bgColor:t})=>{const[r,f]=x.useState(""),[C,u]=x.useState(null),[N,S]=x.useState(!1),[n,a]=x.useState(null),[i,s]=x.useState(-1),g=b(),p=x.useRef(null);x.useEffect(()=>{p.current&&p.current.scrollIntoView({block:"nearest",inline:"nearest"})},[i]);const c=l=>{let d=l.target.value.toLowerCase();f(d)};x.useEffect(()=>{u(null);const l=setTimeout(()=>{r?(u("Loading"),o(r)):a(null)},1e3);return()=>clearTimeout(l)},[r]);const o=async l=>{await F.get(`/api/searchProducts?searchText=${l}`).then(d=>{d.data.status?(a(d.data.products),u("Loaded")):(a(null),u("Not-Found"))}).catch(d=>{console.log("Error")})},R=l=>{const{key:d}=l;let y=0,I=n.length;if(d==="ArrowDown"&&(y=(i+1)%I),d==="ArrowUp"&&(y=(i+I-1)%I),d==="Enter"){let w=n[i],L=`/products/${w.Category}/${w._id}`;g(L)}s(y)};return e.jsxs("div",{id:"SearchBarContainer",tabIndex:1,onKeyDown:R,children:[e.jsxs("div",{id:"SearchBar",style:{marginTop:`${-m}px`,backgroundColor:`${t}`,borderColor:"black"},children:[e.jsx($,{id:"SearchICON"}),e.jsx("input",{type:"text",placeholder:"SEARCH PRODUCT HERE.....",onChange:c}),e.jsxs("div",{id:"Filter",children:[e.jsxs("div",{id:"fliterTEXT",onClick:()=>S(!N),children:[e.jsx("p",{children:"FILTER"}),e.jsx(T,{})]}),e.jsx("div",{children:e.jsx(U,{id:"fliterTEXT"})})]})]}),e.jsx(O,{showFilterBox:N,setShowFilterBox:S}),C==="Loading"&&e.jsx("div",{id:"SearchProductsContainer",style:{overflowY:"auto"},children:e.jsx(V,{height:"30",width:"50",color:"black",wrapperStyle:{justifyContent:"center",padding:"10px"},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"black",strokeWidth:4,strokeWidthSecondary:4})}),C==="Not-Found"&&e.jsx("div",{id:"SearchProductsContainer",style:{overflowY:"auto"},children:e.jsx("p",{style:{padding:"5px",textAlign:"center"},children:"Product Not found"})}),C==="Loaded"&&e.jsx("div",{id:"SearchProductsContainer",children:n==null?void 0:n.map((l,d)=>{let y=`/products/${l.Category}/${l._id}`;return e.jsxs("div",{id:"SearchProducts",className:i===d?"activeIndex":null,ref:i===d?p:null,children:[e.jsx(M,{to:y,children:e.jsxs("div",{onClick:()=>window.scrollTo({top:0,left:0,behavior:"smooth"}),children:[e.jsx("img",{src:l.Product_Photo,alt:l.Product_Name}),e.jsx("p",{children:l.Product_Name})]})}),e.jsx(D,{})]},l.Category+d)})})]})};export{J as S};
