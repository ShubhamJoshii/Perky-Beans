import{r as o,d as N,U as k,N as L,j as t,R,b as p}from"./index-ed1235f5.js";import{B as T}from"./Bags-33ce7a04.js";import{a as I,b as A}from"./index.esm-51f27fd1.js";import{G as P}from"./index.esm-9f69718b.js";import{V as $,L as H}from"./veg-5efd9f18.js";import{$ as V}from"./module-6d8f6cfb.js";import{C as W}from"./CustomerReview-60a1f692.js";import{S as r}from"./index-877835f7.js";/* empty css                 */import{F as E}from"./Footer-ba6025ba.js";import{H as M}from"./Header-47268997.js";import"./index.esm-5e76bc58.js";import"./index.esm-7e255ccb.js";import"./index.esm-9034f3f4.js";import"./index-f2e1e368.js";import"./index-53ba1f7b.js";import"./index.esm-e430d503.js";import"./index.esm-06185452.js";function G(e){return P({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 11h-12c-1.104 0-2 .896-2 2s.896 2 2 2h12c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(e)}function U(e){return P({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 10h-4v-4c0-1.104-.896-2-2-2s-2 .896-2 2l.071 4h-4.071c-1.104 0-2 .896-2 2s.896 2 2 2l4.071-.071-.071 4.071c0 1.104.896 2 2 2s2-.896 2-2v-4.071l4 .071c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(e)}const Q=()=>{var S,v;const[e,n]=o.useState({Sizes:["","",""]}),[l,c]=o.useState("Show"),[d,j]=o.useState(!1),[b,w]=o.useState(null);let u=N().productID;const{userData:h,fetchBag:_,fetchWishList:y,addToWishlist:B,wishlistData:x}=o.useContext(k),{notification:g}=o.useContext(L),C=async()=>{c("Show");let a=h==null?void 0:h._id;await p.get(`/api/fetchProductDetails?_id=${u}&user_id=${a}`).then(s=>{n({...s.data.data,Sizes:s.data.Sizes,total:s.data.total}),c("Hide"),w(s.data.data.Reviews),y()}).catch(s=>{c("LoadBtnShow"),console.log(s)})},f=(a,s)=>{if(s>=0&&s<=20){let i=e.Sizes.map(m=>(m.name===a&&(m.counter=s),m)),D=i[0].price*i[0].counter+i[1].price*i[1].counter+i[2].price*i[2].counter;n({...e,Sizes:i,total:D})}},F=async()=>{e.total>0&&(j(!0),await p.post("/api/updateBag",{productID:e._id,SmallCount:e.Sizes[0].counter,MediumCount:e.Sizes[1].counter,LargeCount:e.Sizes[2].counter}).then(a=>{console.log(a.data),g(a.data,"Success"),_()}).catch(a=>{g(a.response.data.msg2,"Warning")}).finally(()=>{j(!1)}))};return o.useEffect(()=>{u&&C()},[u,h]),t.jsxs(R.Fragment,{children:[t.jsx(T,{}),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"products product-board",children:[t.jsxs("div",{className:"product-card",children:[t.jsx("div",{id:"product-img-BTN1",children:t.jsxs("div",{id:"onhover-showBTN1",children:[t.jsx("p",{id:"wishlist-para",children:"WISHLIST"}),t.jsx(I,{onClick:()=>B(e._id),className:x!=null&&x.find(a=>a.productID===e._id)?"active-Heart heart":"heart"})]})}),e!=null&&e.Product_Photo?t.jsx("img",{className:"product-image",src:e.Product_Photo,alt:e.Product_Photo}):t.jsx(r,{className:"Skeleton"}),t.jsxs("div",{className:"product-info",children:[t.jsx("h5",{className:"product-name",children:(e==null?void 0:e.Product_Name)||t.jsx(r,{})}),t.jsx("p",{className:"product-price",children:e!=null&&e.Price?t.jsxs(t.Fragment,{children:["₹ ",e==null?void 0:e.Price]}):t.jsx(r,{})}),t.jsx("div",{className:"product-star",children:e.Rating?t.jsxs(t.Fragment,{children:[t.jsx(A,{id:"A"}),t.jsxs("p",{className:"product-rating",children:[(S=Number(e.Rating))==null?void 0:S.toFixed(1),"/5.0"]})]}):t.jsx(r,{})})]})]},e._id),t.jsxs("div",{className:"product-board-desc",children:[t.jsx("h1",{children:e.Product_Name?t.jsxs(t.Fragment,{children:[e.Product_Name,e.type==="Veg"?t.jsx("img",{id:"veg",src:$,alt:"Veg"}):t.jsx(H,{id:"LuVegan"})]}):t.jsx(r,{})}),t.jsx("p",{children:e.Description||t.jsx(r,{count:8})}),t.jsxs("div",{className:"product-board-sizes",children:[t.jsx("h2",{children:"Select Sizes"}),t.jsx("div",{className:"sizes",children:(v=e.Sizes)==null?void 0:v.map((a,s)=>t.jsxs("div",{id:a.name,children:[e.Product_Photo?t.jsx("img",{src:e.Product_Photo,alt:e.Product_Photo}):t.jsx(r,{className:"SkeltonSizes"}),t.jsx("p",{children:a.name||t.jsx(r,{count:1})}),t.jsx("p",{className:"product-price",children:a!=null&&a.price?t.jsxs(t.Fragment,{children:["₹ ",a==null?void 0:a.price]}):t.jsx(r,{})}),t.jsxs("div",{className:"counter",children:[t.jsx("button",{className:"btn btn--minus",onClick:()=>{f(a.name,a.counter-1)},children:t.jsx(G,{})}),t.jsx("p",{children:a.name}),t.jsx("span",{children:a.counter}),t.jsx("button",{className:"btn btn--plus",onClick:()=>{f(a.name,a.counter+1)},children:t.jsx(U,{})})]})]},s))}),t.jsx("div",{id:"totalorder",children:e.Product_Name?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"total",children:t.jsxs("h1",{children:["Total Amount ₹ ",e.total]})}),d?t.jsx("button",{className:"order",children:t.jsx(V,{height:"18",width:"18",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:8,strokeWidthSecondary:8})}):t.jsx("button",{className:"order",style:e.total>0?{}:{background:"grey"},onClick:F,children:"Add to Bag"})]}):t.jsx(r,{})})]})]})]}),t.jsx(W,{Review:b})]})]})},lt=()=>{const[e,n]=o.useState({});let l=N().productID;const c=async()=>{await p.get(`/api/fetchProductDetails?_id=${l}`).then(d=>{n(d.data.data)}).catch(d=>{console.log(d)})};return o.useEffect(()=>{l&&c()},[l]),t.jsxs(t.Fragment,{children:[t.jsx(M,{}),t.jsx(Q,{}),t.jsx(E,{})]})};export{lt as default};
