import{r as m,N as y,j as e,R as M,b as D}from"./index-04e2cc78.js";import{H as W}from"./Header-71da15e5.js";import{b as R}from"./index.esm-ddfda7c0.js";import{a as O,b as $}from"./index.esm-df63370e.js";import{$ as L}from"./module-36a6d8f5.js";import{G as w}from"./index.esm-825d002b.js";const P="/assets/ManWomenDining-f04f3a20.png";function _(t){return w({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}},{tag:"path",attr:{d:"M9 12l2 2l4 -4"}}]})(t)}function H(t){return w({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}]})(t)}const j="/assets/Table2-db8c2f67.png",g="/assets/Table4-fa2becc6.png",p="/assets/Table6-846dd93b.png",o="/assets/Table10-4c560584.png",Y=({bookedTable:t,reserveData:d,setReserveData:f,floor:i="Ground"})=>{let l=d.TableNumber;const{notification:n}=m.useContext(y),a=(s,h)=>{let C=`G${h.toString().padStart(2,0)}`;t.find(v=>v===C)?n("Please Select Another Table This Table is already Booked","Warning"):f({...d,Person_Count:s,TableNumber:h})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"row",children:[e.jsx("img",{src:g,id:l===1?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G01")?"table table4 already-Booked":"table table4",onClick:()=>a(4,1)}),e.jsx("img",{src:g,id:l===2?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G02")?"table table4 already-Booked":"table table4",onClick:()=>a(4,2)}),e.jsx("img",{src:g,id:l===3?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G03")?"table table4 already-Booked":"table table4",onClick:()=>a(4,3)})]}),e.jsxs("div",{id:"row",children:[e.jsx("img",{src:g,id:l===4?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G04")?"table table4 already-Booked":"table table4",onClick:()=>a(4,4)}),e.jsx("img",{src:p,id:l===5?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G05")?"table table6 already-Booked":"table table6",onClick:()=>a(6,5)}),e.jsx("img",{src:p,id:l===6?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G06")?"table table6 already-Booked":"table table6",onClick:()=>a(6,6)}),e.jsx("img",{src:g,id:l===7?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G07")?"table table4 already-Booked":"table table4",onClick:()=>a(4,7)})]}),e.jsxs("div",{id:"row",children:[e.jsxs("div",{children:[e.jsx("img",{src:j,id:l===8?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G08")?"table table2 already-Booked":"table table2",onClick:()=>a(2,8)}),e.jsx("img",{src:j,id:l===9?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G09")?"table table2 already-Booked":"table table2",onClick:()=>a(2,9)}),e.jsx("img",{src:j,id:l===10?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G10")?"table table2 already-Booked":"table table2",onClick:()=>a(2,10)}),e.jsx("img",{src:j,id:l===11?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G11")?"table table2 already-Booked":"table table2",onClick:()=>a(2,11)})]}),e.jsx("img",{src:o,id:l===12?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G12")?"table table10 already-Booked":"table table10",onClick:()=>a(10,12)}),e.jsxs("div",{children:[e.jsx("img",{src:g,id:l===13?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G13")?"table table4 already-Booked":"table table4",onClick:()=>a(4,13)}),e.jsx("img",{src:p,id:l===14?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G14")?"table table6 already-Booked":"table table6",onClick:()=>a(6,14)})]})]})]})},U=({bookedTable:t,reserveData:d,setReserveData:f})=>{let i=d.TableNumber;const{notification:l}=m.useContext(y),n=(a,s)=>{let h=`1${s.toString().padStart(2,0)}`;t.find(C=>C===h)?l("Please Select Another Table This Table is already Booked","Warning"):f({...d,Person_Count:a,TableNumber:s})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"row",children:[e.jsx("img",{src:g,id:i===1?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="101")?"table table4 already-Booked":"table table4",onClick:()=>n(4,1)}),e.jsx("img",{src:p,id:i===2?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="102")?"table table6 already-Booked":"table table6",onClick:()=>n(6,2)}),e.jsx("img",{src:p,id:i===3?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="103")?"table table6 already-Booked":"table table6",onClick:()=>n(6,3)}),e.jsx("img",{src:g,id:i===4?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="104")?"table table4 already-Booked":"table table4",onClick:()=>n(4,4)})]}),e.jsxs("div",{id:"row",children:[e.jsx("img",{src:j,id:i===5?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="105")?"table table2 already-Booked":"table table2",onClick:()=>n(2,5)}),e.jsx("img",{src:g,id:i===6?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="106")?"table table4 already-Booked":"table table4",onClick:()=>n(4,6)}),e.jsx("img",{src:g,id:i===7?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="107")?"table table4 already-Booked":"table table4",onClick:()=>n(4,7)}),e.jsx("img",{src:g,id:i===8?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="108")?"table table4 already-Booked":"table table4",onClick:()=>n(4,8)}),e.jsx("img",{src:j,id:i===9?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="109")?"table table2 already-Booked":"table table2",onClick:()=>n(2,9)})]}),e.jsxs("div",{id:"row",children:[e.jsx("img",{src:o,id:i===10?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="110")?"table table10 already-Booked":"table table10",onClick:()=>n(10,10)}),e.jsx("img",{src:o,id:i===11?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="111")?"table table10 already-Booked":"table table10",onClick:()=>n(10,11)}),e.jsx("img",{src:o,id:i===12?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="112")?"table table10 already-Booked":"table table10",onClick:()=>n(10,12)})]})]})},q=()=>{const[t,d]=m.useState(!1),[f,i]=m.useState(!1),[l,n]=m.useState(null),[a,s]=m.useState({Contact_Number:void 0,Person_Count:void 0,Floor:"Ground",TableNumber:void 0,Date:void 0,Timing:void 0}),[h,C]=m.useState(null),[v,F]=m.useState(null),{notification:x}=m.useContext(y),G=r=>{const c=r.target.name,u=r.target.value;s({...a,[c]:u})},S=r=>{const c=r.target.name,u=r.target.value;s({...a,[c]:u}),c==="Date"&&C(r.target.value),c==="Timing"&&F(r.target.value)},I=async()=>{await D.post("/api/tableAvailable",{time:a.Timing,date:a.Date}).then(r=>{n(r.data.tableBooked)})};m.useEffect(()=>{v&&h&&I()},[v,h]),m.useEffect(()=>{a.Date&&a.Timing?i(!0):i(!1)},[a]);const E=async r=>{if(r.preventDefault(),l.length<=26)if(d(!0),a.Contact_Number.length!=10?document.getElementsByClassName("input-Cover")[0].setAttribute("id","input-Cover-Wrong"):document.getElementsByClassName("input-Cover")[0].setAttribute("id",""),a.Person_Count>8?document.getElementsByClassName("input-Cover")[1].setAttribute("id","input-Cover-Wrong"):document.getElementsByClassName("input-Cover")[1].setAttribute("id",""),a.Contact_Number.length===10&&a.Floor&&a.TableNumber){let B=`${a.Floor.slice(0,1)}${a.TableNumber.toString().padStart(2,0)}`;var c=new Date,u=c.getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear()+", "+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();await D.post("/api/ReserveTables",{...a,Booking_DateTime:u,TableNumber:B}).then(N=>{console.log(N),x(N.data.message,"Success"),d(!1),I()}).catch(()=>{setTimeout(()=>d(!1),[1e3]),x("Please Login before Reserving Table","Warning")})}else a.TableNumber?a.Floor?a.Contact_Number!==10&&x("Please Enter a Valid Contact Number","Warning"):x("Please Select Floor","Warning"):x("Please Select Table","Warning");else x("Table Not Avalable Change your Time","Un-Success");d(!1)},A=(r=>{const c=new Date,u=new Date(c.setMonth(c.getMonth()+r)),B=u.getDate().toString().padStart(2,"0"),N=(u.getMonth()+1).toString().padStart(2,"0");return`${u.getFullYear()}-${N}-${B}`})(2);return e.jsx(M.Fragment,{children:e.jsxs("div",{className:"ReserveTable",children:[e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"input-Cover",children:[e.jsx(R,{}),e.jsx("input",{type:"number",placeholder:"YOUR NUMBER",name:"Contact_Number",value:a.Contact_Number,onChange:G,required:!0})]}),e.jsxs("div",{className:"input-Cover",children:[e.jsx(O,{}),e.jsx("input",{type:"date",min:new Date().toISOString().split("T")[0],max:A,placeholder:"SELECT DATE",name:"Date",value:a.Date,onChange:S,required:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"input-Cover",children:[e.jsx($,{}),e.jsx("input",{type:"time",placeholder:"SELECT TIME",name:"Timing",value:a.Timing,onChange:S,required:!0,min:new Date().toISOString().split("T")[0]===(a==null?void 0:a.Date)?new Date().getHours()+1+":"+new Date().getMinutes():"11:00",max:"23:00",step:"1800"})]}),(l==null?void 0:l.length)<=26&&e.jsxs("span",{id:"tableAvailable",children:[e.jsx(_,{})," Table Available"]}),(l==null?void 0:l.length)>26&&e.jsxs("span",{id:"tableNotAvailable",children:[e.jsx(H,{})," Table Not Available"]})]}),t?e.jsx("button",{children:e.jsx(L,{height:"28",width:"28",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:8,strokeWidthSecondary:8})}):e.jsx("button",{children:"BOOK NOW"})]}),e.jsx("div",{id:"SecondHALF",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"selectTable",children:[e.jsx("h2",{children:"Select Table"}),e.jsxs("select",{name:"selecttable",id:"selecttable",onChange:r=>s({...a,Floor:r.target.value,TableNumber:void 0}),children:[e.jsx("option",{value:"Ground",children:"Ground"}),e.jsx("option",{value:"1Floor",children:"Floor 1"})]})]}),e.jsxs("div",{id:"tableSelection",children:[a.Floor==="Ground"&&e.jsx(Y,{bookedTable:l,reserveData:a,setReserveData:s}),a.Floor==="1Floor"&&e.jsx(U,{bookedTable:l,reserveData:a,setReserveData:s})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["BOOK YOUR TABLE TO ENJOY ",e.jsx("br",{}),"THE AMBIENCE"]}),e.jsx("img",{src:P,id:"img",onClick:()=>s({...a,Person_Count:4})})]})})]})})},T=()=>e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(q,{})]});export{T as default};
