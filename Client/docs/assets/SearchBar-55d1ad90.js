import{r as c,u as S,j as e,a as R,b}from"./index-a958b4b2.js";import{B as T}from"./index.esm-33813983.js";import{c as I,d as k,e as L}from"./index.esm-8d092a6f.js";import{M as E,a as F}from"./Header-d9a2d421.js";import{b as l}from"./index.esm-871905a8.js";import{G as M,b as U}from"./index.esm-1e03394f.js";function A(m){return M({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M17.47 250.9C88.82 328.1 158 397.6 224.5 485.5c72.3-143.8 146.3-288.1 268.4-444.37L460 26.06C356.9 135.4 276.8 238.9 207.2 361.9c-48.4-43.6-126.62-105.3-174.38-137z"}}]})(m)}const p="/assets/Beverages-64cde32f.png",B=[{Topic:"Category",subTopic:[{image:p,text:"Muffins",apiName:"Muffins"},{image:p,text:"Beverages",apiName:"Beverages"},{image:p,text:"Pizza",apiName:"Pizza"},{image:p,text:"Snacks and Sides",apiName:"SnacksAndSides"},{image:p,text:"Smoothie & Ice Cream",apiName:"Smoothie"}]},{Topic:"Ingredients",subTopic:[{image:p,text:"Vegetarian",apiName:"Veg"},{image:p,text:"Vegan",apiName:"Vegan"}]}],D=({showFilterBox:m,setShowFilterBox:u})=>{const[t,i]=c.useState({Category:[],Ingredients:[],PriceRange:599,RatingUP:1}),[j,C]=c.useState(!1),f=c.useRef(null),y=S(),P=()=>{let s=t.Category.map(a=>a.apiName),d=t.Ingredients.map(a=>a.apiName);y("/products",{state:{Category:s,Ingredients:d,PriceRange:t.PriceRange,RatingUP:t.RatingUP}}),u(!1)};return c.useEffect(()=>{const s=d=>{f.current&&!f.current.contains(d.target)&&u(!1)};return document.addEventListener("click",s,!0),()=>{document.removeEventListener("click",s,!0)}},[m]),e.jsx(e.Fragment,{children:m?e.jsxs("div",{className:"filter",children:[e.jsxs("div",{className:"box",children:[e.jsxs("div",{className:"header",children:[e.jsx(U,{className:"ArrowBack",onClick:()=>u(!m)}),e.jsx("h3",{children:"Filter"}),e.jsx("p",{className:"reset",onClick:()=>i({Category:[],Ingredients:[]}),children:"Reset"})]}),B.map((s,d)=>e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"topic",children:[e.jsx("h4",{children:s.Topic}),e.jsx(I,{className:"show-More"})]}),e.jsx("div",{className:"category-topic-container",children:s.subTopic.map(a=>e.jsxs("button",{className:"category-topic",id:t.Category.concat(t.Ingredients).find(o=>o.text===a.text)?"active":"",onClick:()=>{var o,N;if(s.Topic==="Category"){let x;(o=t==null?void 0:t.Category)!=null&&o.find(g=>g.text===a.text)&&t.Category.length>0?x=t.Category.filter(g=>g.text!==a.text):x=[...t.Category,a],i({...t,Category:x})}if(s.Topic==="Ingredients"){let x;(N=t==null?void 0:t.Ingredients)!=null&&N.find(g=>g.text===a.text)&&t.Ingredients.length>0?x=t.Ingredients.filter(g=>g.text!==a.text):x=[...t.Ingredients,a],i({...t,Ingredients:x})}},children:[e.jsx("img",{src:a.image,alt:"muffinsImage",id:"filterProductImage"}),e.jsx("p",{children:a.text}),t.Category.concat(t.Ingredients).find(o=>o.text===a.text)&&e.jsx(A,{className:"checkLOGO"})]},a.text))})]},s+d)),e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"topic",children:[e.jsx("h4",{children:"Price Range"}),e.jsxs("div",{children:[e.jsxs("p",{children:["₹80 - ₹",t.PriceRange]}),j?e.jsx(I,{className:"show-More",onClick:()=>{C(!j)}}):e.jsx(k,{className:"show-More",onClick:()=>{C(!j)}})]})]}),e.jsx("input",{type:"range",name:"price",id:"price",min:"80",defaultValue:t.PriceRange,max:"599",onChange:s=>{i({...t,PriceRange:s.target.value})}}),j&&e.jsxs("div",{id:"furtherPrice",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"PriceLow",children:"Low to High"}),e.jsx("input",{type:"radio",name:"Price",id:"PriceLow"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"PriceHigh",children:"High to Low"}),e.jsx("input",{type:"radio",name:"Price",id:"PriceHigh"})]})]})]}),e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"topic",children:[e.jsx("h4",{children:"Customer Review"}),e.jsx(I,{className:"show-More"})]}),e.jsxs("div",{className:"review-wrapper",children:[e.jsxs("div",{className:"subwrapper",children:[e.jsxs("label",{htmlFor:"4Star",children:[e.jsx(l,{}),e.jsx(l,{}),e.jsx(l,{}),e.jsx(l,{}),e.jsx("p",{children:"& up"})]}),e.jsx("input",{type:"radio",name:"Star",id:"4Star",onClick:()=>i({...t,RatingUP:4})})]}),e.jsxs("div",{className:"subwrapper",children:[e.jsxs("label",{htmlFor:"3Star",children:[e.jsx(l,{}),e.jsx(l,{}),e.jsx(l,{}),e.jsx("p",{children:"& up"})]}),e.jsx("input",{type:"radio",name:"Star",id:"3Star",onClick:()=>i({...t,RatingUP:3})})]}),e.jsxs("div",{className:"subwrapper",children:[e.jsxs("label",{htmlFor:"2Star",children:[e.jsx(l,{}),e.jsx(l,{}),e.jsx("p",{children:"& up"})]}),e.jsx("input",{type:"radio",name:"Star",id:"2Star",onClick:()=>i({...t,RatingUP:2})})]}),e.jsxs("div",{className:"subwrapper",children:[e.jsxs("label",{htmlFor:"1Star",children:[e.jsx(l,{}),e.jsx("p",{children:"& up"})]}),e.jsx("input",{type:"radio",name:"Star",id:"1Star",defaultChecked:!0,onClick:()=>i({...t,RatingUP:1})})]})]})]})]}),e.jsx("div",{className:"selections",children:t.Category.concat(t.Ingredients).map((s,d)=>e.jsxs("button",{className:"btn",children:[e.jsx("img",{src:s.image,alt:"muffinsImage"}),e.jsx("p",{children:s.text}),e.jsx(L,{className:"CutBTN",onClick:()=>{t.Category.find(a=>a.text===s.text)?i({Ingredients:t.Ingredients,Category:[...t.Category.filter(a=>a.text!==s.text)]}):i({Category:t.Category,Ingredients:[...t.Ingredients.filter(a=>a.text!==s.text)]})}})]},s.text+d))}),e.jsx("button",{className:"showResult",onClick:P,children:"Show results"})]}):u(m)})},G=({position:m,currPlace:u,bgColor:t})=>{const[i,j]=c.useState(),[C,f]=c.useState(!1),[y,P]=c.useState(null),[s,d]=c.useState(-1),a=S(),o=c.useRef(null),N=async()=>{await b.get("/api/fetchProduct").then(r=>{P(r.data.data)}).catch(r=>{console.log("Error")})};c.useEffect(()=>{o.current&&o.current.scrollIntoView({block:"nearest",inline:"nearest"})},[s]),c.useEffect(()=>{N()},[]);const x=r=>{let n=r.target.value.toLowerCase(),h;n.length>0?h=y.filter(v=>v.Product_Name.toLowerCase().includes(n)||v.Category.toLowerCase().includes(n)):h=[],j(h)},g=r=>{const{key:n}=r;let h=0;if(n==="ArrowDown"&&(h=(s+1)%i.length),n==="ArrowUp"&&(h=(s+i.length-1)%i.length),n==="Enter"){let v=i[s],w=`/products/${v.Category}/${v._id}`;a(w)}d(h)};return e.jsxs("div",{id:"SearchBarContainer",tabIndex:1,onKeyDown:g,children:[e.jsxs("div",{id:"SearchBar",style:{marginTop:`${-m}px`,backgroundColor:`${t}`,borderColor:"black"},children:[e.jsx(T,{id:"SearchICON"}),e.jsx("input",{type:"text",placeholder:"SEARCH PRODUCT HERE.....",onChange:x}),e.jsxs("div",{id:"Filter",children:[e.jsxs("div",{id:"fliterTEXT",onClick:()=>f(!C),children:[e.jsx("p",{children:"FILTER"}),e.jsx(k,{})]}),e.jsx("div",{children:e.jsx(E,{id:"fliterTEXT"})})]})]}),e.jsx(D,{showFilterBox:C,setShowFilterBox:f}),e.jsx("div",{id:"SearchProductsContainer",children:i==null?void 0:i.map((r,n)=>{let h=`/products/${r.Category}/${r._id}`;return e.jsxs("div",{id:"SearchProducts",className:s===n?"activeIndex":null,ref:s===n?o:null,children:[e.jsx(R,{to:h,children:e.jsxs("div",{onClick:()=>window.scrollTo({top:0,left:0,behavior:"smooth"}),children:[e.jsx("img",{src:r.Product_Photo,alt:r.Product_Name}),e.jsx("p",{children:r.Product_Name})]})}),e.jsx(F,{})]},r.Category+n)})})]})};export{G as S};
