import{r as m,N as S,j as e,U as O,e as $,u as U,R as H,b as A}from"./index-ed1235f5.js";import{H as q}from"./Header-47268997.js";import{b as K}from"./index.esm-06185452.js";import{a as Y,b as z}from"./index.esm-e430d503.js";import{$ as X}from"./module-6d8f6cfb.js";import{G as M}from"./index.esm-9f69718b.js";import{l as J}from"./index-f2e1e368.js";const Q="/assets/ManWomenDining-f04f3a20.png";function V(t){return M({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}},{tag:"path",attr:{d:"M9 12l2 2l4 -4"}}]})(t)}function Z(t){return M({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}}]})(t)}const f="/assets/Table2-db8c2f67.png",d="/assets/Table4-fa2becc6.png",o="/assets/Table6-846dd93b.png",C="/assets/Table10-4c560584.png",b=({bookedTable:t,reserveData:u,setReserveData:j,floor:i="Ground"})=>{let l=u.TableNumber;const{notification:n}=m.useContext(S),a=(s,h)=>{let x=`G${h.toString().padStart(2,0)}`;t.find(v=>v===x)?n("Please Select Another Table This Table is already Booked","Warning"):j({...u,Person_Count:s,TableNumber:h})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"row",children:[e.jsx("img",{src:d,id:l===1?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G01")?"table table4 already-Booked":"table table4",onClick:()=>a(4,1)}),e.jsx("img",{src:d,id:l===2?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G02")?"table table4 already-Booked":"table table4",onClick:()=>a(4,2)}),e.jsx("img",{src:d,id:l===3?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G03")?"table table4 already-Booked":"table table4",onClick:()=>a(4,3)})]}),e.jsxs("div",{id:"row",children:[e.jsx("img",{src:d,id:l===4?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G04")?"table table4 already-Booked":"table table4",onClick:()=>a(4,4)}),e.jsx("img",{src:o,id:l===5?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G05")?"table table6 already-Booked":"table table6",onClick:()=>a(6,5)}),e.jsx("img",{src:o,id:l===6?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G06")?"table table6 already-Booked":"table table6",onClick:()=>a(6,6)}),e.jsx("img",{src:d,id:l===7?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G07")?"table table4 already-Booked":"table table4",onClick:()=>a(4,7)})]}),e.jsxs("div",{id:"row",children:[e.jsxs("div",{children:[e.jsx("img",{src:f,id:l===8?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G08")?"table table2 already-Booked":"table table2",onClick:()=>a(2,8)}),e.jsx("img",{src:f,id:l===9?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G09")?"table table2 already-Booked":"table table2",onClick:()=>a(2,9)}),e.jsx("img",{src:f,id:l===10?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G10")?"table table2 already-Booked":"table table2",onClick:()=>a(2,10)}),e.jsx("img",{src:f,id:l===11?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G11")?"table table2 already-Booked":"table table2",onClick:()=>a(2,11)})]}),e.jsx("img",{src:C,id:l===12?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G12")?"table table10 already-Booked":"table table10",onClick:()=>a(10,12)}),e.jsxs("div",{children:[e.jsx("img",{src:d,id:l===13?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G13")?"table table4 already-Booked":"table table4",onClick:()=>a(4,13)}),e.jsx("img",{src:o,id:l===14?"selected":"",alt:"tableImage",className:t!=null&&t.find(s=>s==="G14")?"table table6 already-Booked":"table table6",onClick:()=>a(6,14)})]})]})]})},k=({bookedTable:t,reserveData:u,setReserveData:j})=>{let i=u.TableNumber;const{notification:l}=m.useContext(S),n=(a,s)=>{let h=`1${s.toString().padStart(2,0)}`;t.find(x=>x===h)?l("Please Select Another Table This Table is already Booked","Warning"):j({...u,Person_Count:a,TableNumber:s})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"row",children:[e.jsx("img",{src:d,id:i===1?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="101")?"table table4 already-Booked":"table table4",onClick:()=>n(4,1)}),e.jsx("img",{src:o,id:i===2?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="102")?"table table6 already-Booked":"table table6",onClick:()=>n(6,2)}),e.jsx("img",{src:o,id:i===3?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="103")?"table table6 already-Booked":"table table6",onClick:()=>n(6,3)}),e.jsx("img",{src:d,id:i===4?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="104")?"table table4 already-Booked":"table table4",onClick:()=>n(4,4)})]}),e.jsxs("div",{id:"row",children:[e.jsx("img",{src:f,id:i===5?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="105")?"table table2 already-Booked":"table table2",onClick:()=>n(2,5)}),e.jsx("img",{src:d,id:i===6?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="106")?"table table4 already-Booked":"table table4",onClick:()=>n(4,6)}),e.jsx("img",{src:d,id:i===7?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="107")?"table table4 already-Booked":"table table4",onClick:()=>n(4,7)}),e.jsx("img",{src:d,id:i===8?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="108")?"table table4 already-Booked":"table table4",onClick:()=>n(4,8)}),e.jsx("img",{src:f,id:i===9?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="109")?"table table2 already-Booked":"table table2",onClick:()=>n(2,9)})]}),e.jsxs("div",{id:"row",children:[e.jsx("img",{src:C,id:i===10?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="110")?"table table10 already-Booked":"table table10",onClick:()=>n(10,10)}),e.jsx("img",{src:C,id:i===11?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="111")?"table table10 already-Booked":"table table10",onClick:()=>n(10,11)}),e.jsx("img",{src:C,id:i===12?"selected":"",alt:"tableImage",className:t!=null&&t.find(a=>a==="112")?"table table10 already-Booked":"table table10",onClick:()=>n(10,12)})]})]})},T=J("pk_test_51PIBzKBApeRXee97n2UpjWtEqJfL0P2djHw6aEtmkrEBtRlRKAEWBpTLBTrjtopfQqjK08pNnqMbWuwX48Xy6fEi00FUChBPSg"),tt=()=>{const[t,u]=m.useState(!1),[j,i]=m.useState(!1),[l,n]=m.useState(null),[a,s]=m.useState({Contact_Number:void 0,Person_Count:void 0,Floor:"Ground",TableNumber:void 0,Date:void 0,Timing:void 0}),{userData:h}=m.useContext(O),[x,v]=m.useState(null),[I,R]=m.useState(null),{notification:p}=m.useContext(S),N=$(),E=U(),W=r=>{const c=r.target.name,g=r.target.value;s({...a,[c]:g})},w=r=>{const c=r.target.name,g=r.target.value;s({...a,[c]:g}),c==="Date"&&v(r.target.value),c==="Timing"&&R(r.target.value)},_=async()=>{await A.post("/api/tableAvailable",{time:a.Timing,date:a.Date}).then(r=>{n(r.data.tableBooked)})};m.useEffect(()=>{I&&x&&_()},[I,x]),m.useEffect(()=>{a.Date&&a.Timing?i(!0):i(!1)},[a]),m.useEffect(()=>{N.pathname.split("/").slice(-1)[0]==="success"&&(p("Table Reserved. Check Mail!","Success"),E("/ReserveTable")),N.pathname.split("/").slice(-1)[0]==="canceled"&&(p("Table Reserved Error","Un-Success"),E("/ReserveTable"))},[]);const L=async r=>{if(r.preventDefault(),l.length<=26)if(u(!0),a.Contact_Number.length!=10?document.getElementsByClassName("input-Cover")[0].setAttribute("id","input-Cover-Wrong"):document.getElementsByClassName("input-Cover")[0].setAttribute("id",""),a.Person_Count>8?document.getElementsByClassName("input-Cover")[1].setAttribute("id","input-Cover-Wrong"):document.getElementsByClassName("input-Cover")[1].setAttribute("id",""),a.Contact_Number.length===10&&a.Floor&&a.TableNumber){let B=`${a.Floor.slice(0,1)}${a.TableNumber.toString().padStart(2,0)}`;var c=new Date,g=c.getDate()+"/"+(c.getMonth()+1)+"/"+c.getFullYear()+", "+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();const y=await T;await A.post("/api/create-seat-reservation-session",{...a,Booking_DateTime:g,TableNumber:B,URL:N.pathname.split("/status")[0],userID:h._id,Full_Name:h.Full_Name,Email:h.Email}).then(async D=>{const F=D.data.id,{error:G}=await y.redirectToCheckout({sessionId:F});G&&console.error("Stripe Checkout error:",G)})}else a.TableNumber?a.Floor?a.Contact_Number!==10&&p("Please Enter a Valid Contact Number","Warning"):p("Please Select Floor","Warning"):p("Please Select Table","Warning");else p("Table Not Avalable Change your Time","Un-Success");u(!1)},P=(r=>{const c=new Date,g=new Date(c.setMonth(c.getMonth()+r)),B=g.getDate().toString().padStart(2,"0"),y=(g.getMonth()+1).toString().padStart(2,"0");return`${g.getFullYear()}-${y}-${B}`})(2);return e.jsx(H.Fragment,{children:e.jsxs("div",{className:"ReserveTable",children:[e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"input-Cover",children:[e.jsx(K,{}),e.jsx("input",{type:"number",placeholder:"YOUR NUMBER",name:"Contact_Number",value:a.Contact_Number,onChange:W,required:!0})]}),e.jsxs("div",{className:"input-Cover",children:[e.jsx(Y,{}),e.jsx("input",{type:"date",min:new Date().toISOString().split("T")[0],max:P,placeholder:"SELECT DATE",name:"Date",value:a.Date,onChange:w,required:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"input-Cover",children:[e.jsx(z,{}),e.jsx("input",{type:"time",placeholder:"SELECT TIME",name:"Timing",value:a.Timing,onChange:w,required:!0,min:new Date().toISOString().split("T")[0]===(a==null?void 0:a.Date)?new Date().getHours()+1+":"+new Date().getMinutes():"11:00",max:"23:00",step:"1800"})]}),(l==null?void 0:l.length)<=26&&e.jsxs("span",{id:"tableAvailable",children:[e.jsx(V,{})," Table Available"]}),(l==null?void 0:l.length)>26&&e.jsxs("span",{id:"tableNotAvailable",children:[e.jsx(Z,{})," Table Not Available"]})]}),t?e.jsx("button",{children:e.jsx(X,{height:"28",width:"28",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:8,strokeWidthSecondary:8})}):e.jsx("button",{children:"BOOK NOW @ â‚¹ 500 "})]}),e.jsx("div",{id:"SecondHALF",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"selectTable",children:[e.jsx("h2",{children:"Select Table"}),e.jsxs("select",{name:"selecttable",id:"selecttable",onChange:r=>s({...a,Floor:r.target.value,TableNumber:void 0}),children:[e.jsx("option",{value:"Ground",children:"Ground"}),e.jsx("option",{value:"1Floor",children:"Floor 1"})]})]}),e.jsxs("div",{id:"tableSelection",children:[a.Floor==="Ground"&&e.jsx(b,{bookedTable:l,reserveData:a,setReserveData:s}),a.Floor==="1Floor"&&e.jsx(k,{bookedTable:l,reserveData:a,setReserveData:s})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:["BOOK YOUR TABLE TO ENJOY ",e.jsx("br",{}),"THE AMBIENCE"]}),e.jsx("img",{src:Q,id:"img",onClick:()=>s({...a,Person_Count:4})})]})})]})})},mt=()=>e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsx(tt,{})]});export{mt as default};
