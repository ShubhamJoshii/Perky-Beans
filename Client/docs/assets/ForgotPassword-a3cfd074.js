import{r,N as _,u as L,j as e,b as w}from"./index-8e9028a4.js";import{H as U,c as O}from"./Header-53593a74.js";import{O as f}from"./Blocks-8ea0c07c.js";import{F as d,a as c}from"./index.esm-95602ebe.js";import"./index.esm-4d07417e.js";const $=()=>{const[s,u]=r.useState({Email:"",OTP:"",Password:"",Confirm_Password:""}),[x,g]=r.useState(!1),[j,P]=r.useState(!1),[v,E]=r.useState(!1),[y,C]=r.useState(!1),[b,S]=r.useState(!1),[m,o]=r.useState(!1),[p,h]=r.useState(0),{notification:n}=r.useContext(_),V=L(),T=async i=>{i.preventDefault(),o(!0),await w.post("/api/forgetPassword/sendOTP",{Email:s.Email}).then(a=>{var t,l;n((t=a.data)==null?void 0:t.message,"Success"),(l=a.data)!=null&&l.status&&h(1),setTimeout(()=>o(!1),1e3)}).catch(()=>{o(!1)})},N=async i=>{i.preventDefault(),o(!0),await w.post("/api/forgetPassword/otpVerify",{Email:s.Email,OTP:s.OTP}).then(a=>{var t;n((t=a.data)==null?void 0:t.message,"Success"),a.data.status&&h(2),setTimeout(()=>{o(!1)},1e3)}).catch(()=>o(!1))},F=async i=>{i.preventDefault(),s.Password===s.Confirm_Password&&x&&j&&v&&y&&b&&!s.Password.includes(" ")?(o(!0),await w.post("/api/forgetPassword/updatePassword",{Email:s.Email,OTP:s.OTP,Password:s.Password,Confirm_Password:s.Confirm_Password}).then(a=>{var t;n(a.data.message,"Success"),(t=a.data)!=null&&t.status&&V("/auth/login"),setTimeout(()=>o(!1),1e3)}).catch(()=>o(!1))):s.Password.includes(" ")?n("User Password is does not Include any white space","Warning"):s.Password!==s.Confirm_Password?n("User Password and Confirm Password not Matched","Warning"):s.Password.length<8&&n("Password length should be greater than and equal to 8","Warning")},R=i=>{const a=s.Password,t=new RegExp("(?=.*[a-z])"),l=new RegExp("(?=.*[A-Z])"),A=new RegExp("(?=.*[0-9])"),D=new RegExp("(?=.*[!@#$%^&*])"),I=new RegExp("(?=.{8,})");t.test(a)?g(!0):g(!1),l.test(a)?P(!0):P(!1),D.test(a)?C(!0):C(!1),A.test(a)?E(!0):E(!1),I.test(a)?S(!0):S(!1)},k=i=>{const a=i.target.name,t=i.target.value;u({...s,[a]:t}),R()};r.useEffect(()=>{o(!1)},[p]);const W=i=>{const{name:a,value:t}=i.target;(/^[A-Za-z\s]+$/.test(t[0])||t==="")&&u({Email:i.target.value})};return e.jsxs(e.Fragment,{children:[e.jsx(U,{}),e.jsxs("div",{className:"forgot-password-form",children:[e.jsx("h1",{children:"Forgot Password"}),e.jsx("div",{className:"instructions-box",children:e.jsx("p",{className:"instructions",children:"Enter your email address that you used to register. We'll send you an email with a link to reset your password. If you donâ€™t see the email, check other places it might be, like your junk, spam, social, or other folders."})}),p===0&&e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.Email,placeholder:"Enter your email",onChange:W})]}),m?e.jsx(f,{height:"24",width:"24",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx("input",{type:"submit",value:"SEND OTP",className:"otp-link"})]}),p===1&&e.jsxs("form",{onSubmit:N,children:[e.jsxs("span",{children:[e.jsx(O,{})," ",s.Email," ",e.jsx("pre",{onClick:()=>h(0),children:"(edit)"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"OTP:"}),e.jsx("input",{type:"number",id:"otp",name:"otp",placeholder:"Enter OTP",onChange:i=>u({...s,OTP:i.target.value})}),e.jsx("p",{id:"resendOTP",onClick:T,children:"RESEND OTP"})]}),m?e.jsx(f,{height:"24",width:"24",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx("input",{type:"submit",value:"VERIFY OTP",className:"otp-link"})]}),p===2&&e.jsxs("form",{onSubmit:F,children:[e.jsxs("span",{children:[e.jsx(O,{})," ",s.Email," ",e.jsx("pre",{onClick:()=>h(0),children:"(edit)"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Enter New Password:"}),e.jsx("input",{type:"text",id:"password",name:"Password",placeholder:"Enter Password",onChange:k})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Enter Confirm Password:"}),e.jsx("input",{type:"text",id:"Confirm_password",name:"Confirm_Password",placeholder:"Enter Confirm Password",onChange:k})]}),e.jsxs("div",{id:"passwordValidation",children:[e.jsxs("p",{children:[x?e.jsx(d,{id:"validated"}):e.jsx(c,{id:"no-validated"}),"At least one lowercase letter"]}),e.jsxs("p",{children:[v?e.jsx(d,{id:"validated"}):e.jsx(c,{id:"no-validated"})," At least one number"]}),e.jsxs("p",{children:[j?e.jsx(d,{id:"validated"}):e.jsx(c,{id:"no-validated"})," At least one uppercase letter"]}),e.jsxs("p",{children:[b?e.jsx(d,{id:"validated"}):e.jsx(c,{id:"no-validated"})," At least 8 characters"]}),e.jsxs("p",{children:[y?e.jsx(d,{id:"validated"}):e.jsx(c,{id:"no-validated"})," At least one special character"]})]}),m?e.jsx(f,{height:"24",width:"24",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx("input",{type:"submit",value:"UPDATE PASSWORD",className:"otp-link"})]})]})]})};export{$ as default};
