import{r as o,U as R,d as P,N as A,u as O,j as e,a as B,b as w}from"./index-8034329b.js";import{c as T}from"./index.esm-e4be5a7f.js";import{c as E}from"./index.esm-3007911d.js";import{b as F,O as M}from"./Header-f9b55ae4.js";import{c as _,d as G}from"./index.esm-4a30bd17.js";import{P as U}from"./Footer-50ddd481.js";const J=()=>{var p,C;const[r,l]=o.useState(!1),[h,g]=o.useState(null),{userData:i,setUserData:W}=o.useContext(R),[d,$]=o.useState(P()),{checkUserAlreadyLogin:x,notification:y}=o.useContext(A),[L,j]=o.useState(!1);let m=0;const a=o.useRef(null),u=O();o.useEffect(()=>{const t=n=>{a.current&&!a.current.contains(n.target)&&l(!1)};return document.addEventListener("click",t,!0),()=>{document.removeEventListener("click",t,!0)}},[r]);const k=async t=>{await w.post("/api/removeFromBag",{productID:t}).then(n=>{x()})},I=async t=>{var n;((n=i==null?void 0:i.Bag)==null?void 0:n.length)>0&&(j(!0),await w.post("/api/orderNow").then(s=>{s.data==="Product Ordered"&&(y(s.data),x()),j(!1)}))};return o.useEffect(()=>{var t;Object.keys(d).length>0?(t=i==null?void 0:i.Bag)==null||t.filter(n=>n.Category===d.categoryID||n._id===d.categoryID):i==null||i.Bag},[d]),e.jsx(e.Fragment,{children:r?e.jsx("div",{id:"BagSliderContainer",children:e.jsxs("div",{id:"BagSlider",ref:a,children:[e.jsxs("div",{id:"bag-back-btn",children:[e.jsx(F,{onClick:()=>l(!r)}),e.jsx("h3",{children:"BAG"})]}),!i&&e.jsxs("div",{id:"RegiLogin",children:[e.jsx("p",{children:"100 Reward Points on new registration"}),e.jsx("button",{id:"Login-Register-BTN",onClick:()=>u("/auth/login"),children:"LOGIN/ REGISTER"})]}),i?e.jsx("div",{id:"bagScroll",children:((p=i==null?void 0:i.Bag)==null?void 0:p.length)>0?e.jsx(e.Fragment,{children:(C=i==null?void 0:i.Bag)==null?void 0:C.map((t,n)=>{const s=U.find(b=>b._id===t.productID),v=(s.Price-50)*t.SmallCount,S=s.Price*t.MediumCount,f=(s.Price+50)*t.LargeCount,c=v+S+f;m+=c;let N=`/products/${s.Category}/${s._id}`;return e.jsxs("div",{id:"productCart",onClick:()=>u(N),children:[e.jsxs("div",{id:"productCartFront",children:[e.jsx("img",{src:s.Image,alt:"CardImage"}),e.jsxs("div",{id:"productDetail",children:[e.jsxs("div",{id:"productName",children:[e.jsx("h3",{children:s.Name}),e.jsxs("h4",{children:["Quantity: ",t.SmallCount>0&&t.SmallCount+"S,"," ",t.MediumCount>0&&t.MediumCount+"M,"," ",t.LargeCount>0&&t.LargeCount+"L,"," "]})]}),e.jsxs("h4",{children:["₹",c]}),e.jsxs("div",{id:"Icons",children:[e.jsx(E,{onClick:()=>k(t.productID)}),h===n?e.jsx(_,{onClick:()=>g(null)}):e.jsx(G,{onClick:()=>g(n)})]})]})]}),e.jsxs("div",{id:"Amount_Info_Show",style:h===n?{height:"100%"}:{height:"0"},children:[e.jsxs("div",{id:"Amount_INFO",children:[e.jsx("h4",{children:"TOTAL :"}),e.jsxs("div",{children:[e.jsxs("p",{children:["Regular ",t.SmallCount&&"*"+t.SmallCount]}),e.jsxs("p",{children:["Medium ",t.MediumCount&&"*"+t.MediumCount]}),e.jsxs("p",{children:["Large ",t.LargeCount&&"*"+t.LargeCount]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:["₹",v]}),e.jsxs("p",{children:["₹",S]}),e.jsxs("p",{children:["₹",f]})]})]}),e.jsxs("div",{id:"TotalAmt",children:[e.jsx("p",{children:"You Pay :"}),e.jsxs("p",{children:["₹",c]})]})]})]},n)})}):e.jsx("div",{id:"productCart",style:{textAlign:"center"},children:"No Item Found in Bag"})}):e.jsxs("div",{id:"bagScroll",className:"userNotLogin",children:[e.jsxs("p",{children:["Sorry,the ",e.jsx("strong",{children:"ORDER"})," and ",e.jsx("strong",{children:"WISHLIST"})," is restricted to registered users only."]}),e.jsxs("p",{children:["please",e.jsx(B,{to:"/auth/register",children:" register"})," or ",e.jsx(B,{to:"/auth/login",children:"login"})," to continue."]})]}),e.jsxs("div",{id:"Bag-Total-Price",children:[e.jsx("h4",{children:"Grand Total : "}),e.jsxs("h4",{children:["₹ ",m]}),e.jsx("button",{style:(i==null?void 0:i.Bag.length)>0?{}:{background:"grey"},onClick:I,children:L?e.jsx(M,{height:"14",width:"14",color:"white",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx(e.Fragment,{children:"ORDER NOW"})})]})]})}):e.jsxs("div",{id:"bagBTN",children:[e.jsx(T,{onClick:()=>l(!r)}),(i==null?void 0:i.Bag.length)>0&&e.jsx("p",{children:i==null?void 0:i.Bag.length})]})})};export{J as B};
