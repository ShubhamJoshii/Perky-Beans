import{r,c as C,U as T,N as L,j as t,R as k,b as N}from"./index-98f0d127.js";import{O as v}from"./Blocks-3465ce0c.js";import{a as F,b as I}from"./index.esm-79fba085.js";import{G as S}from"./index.esm-d04a934b.js";import{V as A,L as H}from"./veg-2bdb247e.js";import{B as W}from"./Bags-b9116bc3.js";import{C as E}from"./CustomerReview-987a36be.js";import{F as V}from"./Footer-a1b8e172.js";import{H as M}from"./Header-6ac32451.js";import"./index.esm-e83a1523.js";import"./index.esm-3249597b.js";import"./index-58cf35b4.js";import"./index.esm-a66f5f8d.js";import"./index.esm-7c76c066.js";function R(o){return S({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 11h-12c-1.104 0-2 .896-2 2s.896 2 2 2h12c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(o)}function U(o){return S({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 10h-4v-4c0-1.104-.896-2-2-2s-2 .896-2 2l.071 4h-4.071c-1.104 0-2 .896-2 2s.896 2 2 2l4.071-.071-.071 4.071c0 1.104.896 2 2 2s2-.896 2-2v-4.071l4 .071c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(o)}const G=()=>{var f;const[o,n]=r.useState(0),[a,d]=r.useState(0),[i,h]=r.useState(0),[s,w]=r.useState({}),[g,m]=r.useState("Show"),[P,O]=r.useState(!1);r.useState({});let p=C().productID;const{userData:l,setUserData:q,updateBag:b,fetchBag:J,fetchWishList:y,addToBag:K,addToWishlist:B,bagData:u,wishlistData:x}=r.useContext(T);r.useContext(L),r.useEffect(()=>{l==null||l.Bag.find(e=>{e.productID===s._id&&(n(e.SmallCount),d(e.MediumCount),h(e.LargeCount))})},[l]);const j=async()=>{m("Show"),await N.post("/api/fetchProductDetails",{_id:p}).then(e=>{w(e.data.data),m("Hide"),y()}).catch(e=>{m("LoadBtnShow"),console.log(e)}).finally(()=>{})};r.useEffect(()=>{const e=u==null?void 0:u.find(D=>D.productID===s._id);e&&(n(e.SmallCount),d(e.MediumCount),h(e.LargeCount))},[u,s]),r.useEffect(()=>{p&&j()},[p]);const c=[{id:1,name:"regular",price:(s==null?void 0:s.Price)-50,counter:o,setCounter:n},{id:2,name:"medium",price:s==null?void 0:s.Price,counter:a,setCounter:d},{id:3,name:"large",price:(s==null?void 0:s.Price)+50,counter:i,setCounter:h}],_=c[0].price*c[0].counter+c[1].price*c[1].counter+c[2].price*c[2].counter;return t.jsxs(k.Fragment,{children:[t.jsx(W,{}),g==="Hide"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"products product-board",children:[t.jsxs("div",{className:"product-card",children:[t.jsx("div",{id:"product-img-BTN1",children:t.jsxs("div",{id:"onhover-showBTN1",children:[t.jsx("p",{id:"wishlist-para",children:"WISHLIST"}),t.jsx(F,{onClick:()=>B(s._id),className:x!=null&&x.find(e=>e.productID===s._id)?"active-Heart heart":"heart"})]})}),t.jsx("img",{className:"product-image",src:s.Product_Photo,alt:s.Product_Photo,loading:"lazy"}),t.jsxs("div",{className:"product-info",children:[t.jsx("h5",{className:"product-name",children:s.Product_Name}),t.jsxs("p",{className:"product-price",children:["₹",s.Price]}),t.jsxs("div",{className:"product-star",children:[t.jsx(I,{id:"A"}),t.jsxs("p",{className:"product-rating",children:[(f=Number(s.Rating))==null?void 0:f.toFixed(1),"/5.0"]})]})]})]},s._id),t.jsxs("div",{className:"product-board-desc",children:[t.jsxs("h1",{children:[s.Product_Name,s.type==="Veg"?t.jsx("img",{id:"veg",src:A,alt:"Veg"}):t.jsx(H,{id:"LuVegan"})]}),t.jsx("p",{children:s.Description}),t.jsxs("div",{className:"product-board-sizes",children:[t.jsx("h2",{children:"Select Sizes"}),t.jsx("div",{className:"sizes",children:c.map(e=>t.jsxs("div",{id:e.name,children:[t.jsx("img",{src:s.Product_Photo,alt:s.Product_Photo}),t.jsx("p",{children:e.name}),t.jsxs("p",{className:"product-price",children:["₹",e.price]}),t.jsxs("div",{className:"counter",children:[t.jsx("button",{className:"btn btn--minus",onClick:()=>{e.counter>0?e.setCounter(e.counter-1):e.setCounter(e.counter)},children:t.jsx(R,{})}),t.jsx("p",{children:e.name}),t.jsx("span",{children:e.counter}),t.jsx("button",{className:"btn btn--plus",onClick:()=>{e.counter<9?e.setCounter(e.counter+1):e.setCounter(e.counter)},children:t.jsx(U,{})})]})]},e.id))}),t.jsxs("div",{id:"totalorder",children:[t.jsx("div",{className:"total",children:t.jsxs("h1",{children:["Total Amount ₹ ",_]})}),P?t.jsx("button",{className:"order",children:t.jsx(v,{height:"18",width:"18",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:8,strokeWidthSecondary:8})}):t.jsx("button",{className:"order",style:o||a||i>0?{}:{background:"grey"},onClick:()=>b(s._id,o,a,i),children:"Add to Bag"})]})]})]})]}),t.jsx(E,{})]}):t.jsx(t.Fragment,{children:g==="Show"?t.jsx(v,{height:"40",width:"60",color:"white",wrapperStyle:{},wrapperClass:"products loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:4,strokeWidthSecondary:4}):t.jsxs("div",{className:"products loadingBTN",children:[t.jsx("p",{children:"Something went wrong"}),t.jsx("button",{onClick:j,children:"Try again"})]})})]})},nt=()=>{const[o,n]=r.useState({});let a=C().productID;const d=async()=>{await N.post("/api/fetchProductDetails",{_id:a}).then(i=>{n(i.data.data)}).catch(i=>{console.log(i)})};return r.useEffect(()=>{a&&d()},[a]),t.jsxs(t.Fragment,{children:[t.jsx(M,{}),t.jsx(G,{}),t.jsx(V,{})]})};export{nt as default};
