import{r as i,N as P,j as t,b as m}from"./index-ed1235f5.js";import{a as y}from"./index.prod-bd28146a.js";import{b as R}from"./index.esm-5e76bc58.js";import"./module-6d8f6cfb.js";import{A}from"./AdminSidebar-b4b5b75f.js";import{P as C}from"./Pagination-a690dfde.js";import{S as d}from"./index-877835f7.js";/* empty css                 */import"./index.esm-9f69718b.js";import"./index.esm-51f27fd1.js";import"./index.esm-7e255ccb.js";const z=()=>{let j=Array.from({length:12},(e,s)=>{});const[n,f]=i.useState(j),[g,l]=i.useState(!0),[o,p]=i.useState(1),[c,U]=i.useState(o),{notification:h}=i.useContext(P),S=async(e,s)=>{l(!0),await m.post("/api/updateUserRole",{_id:e,Role:s}).then(a=>{a.data.result?(x(),h(a.data.message,"Success")):h(a.data.message,"Un-Success")}).catch(a=>{console.log(a)}).finally(()=>{l(!1)})},x=async()=>{l(!0),f(j),await m.get(`/api/fetchUsers?page=${o}&limit=12`).then(e=>{var s;(s=e.data)!=null&&s.data&&(f(e.data.data),U(e.data.TotalPages))}).catch(e=>{}).finally(()=>{l(!1)})};i.useEffect(()=>{x()},[o]);const b=async e=>{alert(e),await m.post("/api/deleteUser",{_id:e}).then(s=>{s.data.result?(h(s.data,"Success"),console.log(s.data),x()):h(s.data,"Un-Success")}).catch(s=>{console.log(s)})},N=e=>{p(e)};return t.jsxs("div",{className:"admin-container",children:[t.jsx(A,{}),t.jsxs("div",{className:"dashboard-product-box",children:[t.jsx("h2",{class:"heading",children:"Users"}),t.jsxs("table",{class:"table",role:"table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Email"}),t.jsx("th",{children:"Role"}),t.jsx("th",{children:"Email Verified"}),t.jsx("th",{children:"Admins"}),t.jsx("th",{children:"Delete"})]})}),t.jsxs("tbody",{children:[n==null?void 0:n.map((e,s)=>{const a=(e==null?void 0:e.Role)==="Admin"||!1;return t.jsxs("tr",{children:[t.jsx("td",{children:(e==null?void 0:e.Full_Name)||t.jsx(d,{})}),t.jsx("td",{children:(e==null?void 0:e.Email)||t.jsx(d,{})}),t.jsx("td",{children:(e==null?void 0:e.Role)||t.jsx(d,{})}),t.jsx("td",{children:e!=null&&e._id?e!=null&&e.isVerified?t.jsx("p",{id:"verified",children:"Verified"}):t.jsx("p",{id:"not-verified",children:"Not-Verified"}):t.jsx(d,{})}),t.jsx("td",{children:e!=null&&e._id?t.jsx(y,{onChange:()=>S(e==null?void 0:e._id,e==null?void 0:e.Role),checked:a,className:"react-switch"}):t.jsx(d,{})}),t.jsx("td",{children:t.jsx("button",{onClick:()=>b(e==null?void 0:e._id),children:e!=null&&e._id?t.jsx(R,{}):t.jsx(d,{})})})]},s)}),!n&&t.jsx("p",{children:"No User Found"})]})]}),!g&&t.jsx(C,{currentPage:o,totalPages:c,onPageChange:N})]})]})};export{z as default};
