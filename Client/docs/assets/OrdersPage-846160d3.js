import{r as d,N as w,j as e,b as S,U as P,u as R,d as u,a as O}from"./index-dbb2527e.js";import{H as p}from"./Header-15d56c07.js";import{F as E}from"./Footer-8e48a51a.js";import{S as k}from"./SearchBar-55a3fc4a.js";import{a as y}from"./index.esm-d3697b5c.js";import{O as I}from"./Blocks-0e59252c.js";import{B as b}from"./Bags-d9fdcdc4.js";import"./index.esm-b62fc84f.js";import"./index.esm-a8bd4a32.js";import"./index.esm-c62830c2.js";import"./index.esm-7735cdba.js";import"./index.esm-0691a448.js";const L=({product:s,orderData:r,ids:i,userData:j,setUserData:o})=>{const[a,c]=d.useState(null),[x,h]=d.useState(!1),{checkUserAlreadyLogin:t,notification:m}=d.useContext(w),l=async g=>{h(!0),await S.post("/api/cancelOrder",{productID:g}).then(n=>{n.data==="Product Ordered Cancelled"&&t()}).catch(n=>{console.log(n)}).finally(()=>{h(!1)})};return e.jsxs("div",{id:"orderProduct",children:[e.jsxs("div",{id:"orderCards",children:[e.jsxs("h4",{children:["ORDER ID : ",r._id.slice(0,10)]}),e.jsx("h2",{children:s==null?void 0:s.Product_Name}),e.jsxs("div",{id:"orders-Product",children:[r.SmallCount>0&&e.jsxs("div",{children:[e.jsx("img",{src:s==null?void 0:s.Product_Photo,alt:"ProductImg"}),e.jsx("p",{children:"REGULAR"}),e.jsxs("p",{children:["₹ ",(s==null?void 0:s.Price)-50,"*",r.SmallCount]})]}),r.MediumCount>0&&e.jsxs("div",{children:[e.jsx("img",{src:s==null?void 0:s.Product_Photo,alt:"ProductImg"}),e.jsx("p",{children:"MEDIUM"}),e.jsxs("p",{children:["₹ ",s==null?void 0:s.Price,"*",r.MediumCount]})]}),r.LargeCount>0&&e.jsxs("div",{children:[e.jsx("img",{src:s==null?void 0:s.Product_Photo,alt:"ProductImg"}),e.jsx("p",{children:"REGULAR"}),e.jsxs("p",{children:["₹ ",(s==null?void 0:s.Price)+50,"*",r.LargeCount]})]})]}),e.jsxs("p",{id:"orderDesc",children:[s==null?void 0:s.Description.slice(0,70),"..."]}),e.jsxs("div",{id:"btns",children:[e.jsx("button",{onClick:()=>l(r.productID),children:x?e.jsx(I,{height:"14",width:"14",color:"white",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx(e.Fragment,{children:"CANCEL"})}),e.jsx("button",{onClick:()=>{r.productID===a?c(null):c(r.productID)},children:"TRACK YOUR ORDER"})]})]}),a===r.productID?e.jsxs("div",{className:"track-order",children:[e.jsx(y,{id:"closeICON",onClick:()=>c(null)}),e.jsx("h3",{children:"TRACK YOUR ORDER"}),e.jsxs("div",{children:[e.jsx("div",{id:"Line"}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h5",{children:"ORDER CONFIRMED, 10th July 2023, 10:45 AM "}),e.jsx("p",{children:"Your Order has been placed."}),e.jsx("p",{children:"Chef is making your product ready."})]}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h4",{children:"ORDER SHIPPED at 10th July 2023, 11:10 AM "}),e.jsx("p",{children:"Perky Bean Logistics - FMPPQ934271"}),e.jsx("p",{children:"Your items has been shipped."})]}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h5",{children:"OUT FOR DELIVERY at 11:30 am"}),e.jsx("p",{children:"Your item is out for delivery"})]}),e.jsxs("div",{id:"timeStamp-Order",children:[e.jsx("div",{id:"currStage-Order"}),e.jsx("h5",{children:"DELIVERED by 12 am"})]})]})]}):e.jsx(e.Fragment,{})]})},F=({product:s,orderData:r,userData:i,setUserData:j})=>{const[o,a]=d.useState(!1),{checkUserAlreadyLogin:c}=d.useContext(w),x=async t=>{i.Wishlist.find(l=>l.productID===t)&&await S.post("/api/removefromWishlist",{productID:t}).then(l=>{c()})},h=async t=>{a(!0),i.Bag.find(l=>l.productID===t)||await S.post("/api/addtoBag",{productID:t,SmallCount:0,MediumCount:1,LargeCount:0}).then(l=>{c(),a(!1)}),setTimeout(()=>a(!1),1e3)};return e.jsxs("div",{id:"WishList-Card",children:[e.jsx("img",{src:s==null?void 0:s.Product_Photo,alt:"ImageProduct"}),e.jsxs("div",{id:"productDesc",children:[e.jsx("h2",{children:s==null?void 0:s.Product_Name}),e.jsxs("p",{children:[s==null?void 0:s.Description.slice(0,180),"..."]})]}),e.jsxs("h1",{children:["₹",s==null?void 0:s.Price]}),e.jsx(y,{id:"IconClose",onClick:()=>x(r.productID)}),e.jsx("button",{onClick:()=>h(r.productID),children:o?e.jsx(I,{height:"14",width:"14",color:"white",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx(e.Fragment,{children:i!=null&&i.Bag.find(t=>t.productID===r.productID)?e.jsx(e.Fragment,{children:" Added "}):e.jsx(e.Fragment,{children:"Add to Bag "})})})]})},D="/assets/scooter-cca3a519.png",W=()=>{var l,g;const[s,r]=d.useState(!0),{userData:i,setUserData:j}=d.useContext(P),[o,a]=d.useState(null),[c,x]=d.useState(!0),h=R(),t=u(),m=async()=>{await S.post("/api/fetchProduct",{Available:!1}).then(n=>{console.log(n.data.data),a(n.data.data)}).catch(n=>{console.log("Error")}).finally(()=>{x(!1)})};return d.useEffect(()=>{m()},[]),d.useEffect(()=>{t.orders==="my-wishlist"?r(!1):r(!0)},[t]),e.jsxs(e.Fragment,{children:[e.jsx(k,{bgColor:"white"}),e.jsxs("div",{id:"Orders",children:[e.jsxs("div",{id:"order-wishlists",children:[e.jsx("h3",{onClick:()=>{h("/orders/my-order")},id:s?"active":"",children:"MY ORDERS"}),e.jsx("h3",{onClick:()=>{h("/orders/my-wishlist")},id:s?"":"active",children:"MY WISHLIST"})]}),c?e.jsx("div",{id:"orderCardsContainer",children:e.jsx(I,{height:"40",width:"60",color:"black",wrapperStyle:{marginTop:"100px"},wrapperClass:"orderProduct loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:4,strokeWidthSecondary:4})}):e.jsx(e.Fragment,{children:i?e.jsx(e.Fragment,{children:s?e.jsx(e.Fragment,{children:(i==null?void 0:i.Orders.length)>0?e.jsx("div",{id:"orderCardsContainer",children:(l=i==null?void 0:i.Orders)==null?void 0:l.toReversed().map((n,C)=>{const v=o==null?void 0:o.find(f=>f._id===n.productID);return console.log(v),e.jsx(L,{product:v,orderData:n,ids:C,userData:i,setUserData:j},n+C)})}):e.jsx("div",{id:"orderCardsContainer",children:"No order is Placed till now"})}):e.jsx(e.Fragment,{children:(i==null?void 0:i.Wishlist.length)>0?e.jsx("div",{id:"wishlist",children:e.jsx("div",{id:"orderCardsContainer",children:(g=i==null?void 0:i.Wishlist)==null?void 0:g.toReversed().map((n,C)=>{const v=o==null?void 0:o.find(f=>f._id===n.productID);return e.jsx(F,{product:v,orderData:n,userData:i,setUserData:j},n+C)})})}):e.jsx("div",{id:"orderCardsContainer",children:"No Item Found"})})}):e.jsxs("div",{id:"orderCardsContainer",className:"userNotLogin",children:[e.jsxs("p",{children:["Sorry,the ",e.jsx("strong",{children:"ORDER"})," and ",e.jsx("strong",{children:"WISHLIST"})," is restricted to registered users only."]}),e.jsxs("p",{children:["please",e.jsx(O,{to:"/auth/register",children:" register"})," or ",e.jsx(O,{to:"/auth/login",children:"login"})," to continue."]})]})})]}),e.jsx("img",{src:D,alt:"Scooter",id:"scooterIMG"}),e.jsx(b,{})]})},V=()=>e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx(W,{}),e.jsx(E,{})]});export{V as default};
