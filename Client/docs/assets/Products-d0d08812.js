import{r,j as e,L as p,b as g}from"./index-e87a2a31.js";import{A as C}from"./AdminSidebar-334c169f.js";import{a as N}from"./index.esm-ae7f451c.js";import{a as v}from"./index.prod-09b21505.js";import{P as w}from"./Pagination-8f875792.js";import{O as _}from"./Blocks-47291179.js";import"./index.esm-27a48223.js";import"./index.esm-c26df382.js";import"./index.esm-ed3e4fd2.js";const W=()=>{const[l,P]=r.useState(!0),[n,c]=r.useState(1),[s,h]=r.useState(),x=async()=>{await g.post("/api/fetchProduct",{Available:!1}).then(t=>{h(t.data.data)}).catch(t=>{console.log("Error")}).finally(()=>{P(!1)})};r.useEffect(()=>{x()},[]);const u=async(t,i)=>{await g.post("/api/updateProductAvailability",{_id:t,isAvailable:i}).then(a=>{a.data.result&&x()}).catch(a=>{console.log(a)})},d=10,b=Math.ceil((s==null?void 0:s.length)/d),f=t=>{c(t)},o=s==null?void 0:s.slice((n-1)*d,n*d),y=()=>{let t=s.sort((i,a)=>{let j=i.Product_Name.toLowerCase(),m=a.Product_Name.toLowerCase();return j>m?1:j<m?-1:0});h(t)};return r.useEffect(()=>{c(1)},[s]),e.jsxs("div",{className:"admin-container",children:[e.jsx(C,{}),e.jsxs("div",{className:"dashboard-product-box",children:[e.jsx("h2",{className:"heading",children:"Products"}),e.jsxs("table",{className:"table",role:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"_id"}),e.jsx("th",{children:"Photo"}),e.jsx("th",{onClick:y,children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Rating"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Action"}),e.jsx("th",{children:"Available"})]})}),l?e.jsx("td",{colSpan:"10",children:e.jsx(_,{height:"40",width:"60",color:"black",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"black",strokeWidth:4,strokeWidthSecondary:4})}):e.jsxs("tbody",{children:[o==null?void 0:o.map((t,i)=>{const a=t.Available;return e.jsxs("tr",{children:[e.jsx("td",{children:t._id}),e.jsx("td",{children:e.jsx("img",{src:t.Product_Photo,style:{borderRadius:"20px"},alt:t.Product_Name})}),e.jsx("td",{children:t.Product_Name}),e.jsxs("td",{children:[t.Description.slice(0,50),"..."]}),e.jsxs("td",{children:["â‚¹",t.Price]}),e.jsx("td",{children:t.Rating}),e.jsx("td",{children:t.Category}),e.jsx("td",{children:t.type}),e.jsx("td",{children:e.jsx(p,{to:`/admin/product/${t._id}`,children:"Manage"})}),e.jsx("td",{children:e.jsx(v,{onChange:()=>u(t._id,!a),checked:a,className:"react-switch"})})]},i)}),!o&&e.jsx("p",{children:"No Product Found"})]})]}),!l&&e.jsx(w,{currentPage:n,totalPages:b,onPageChange:f})]}),e.jsx(p,{to:"/admin/product/new",className:"create-product-btn",children:e.jsx(N,{})})]})};export{W as default};
