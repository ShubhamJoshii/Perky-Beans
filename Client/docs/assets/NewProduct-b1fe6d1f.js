import{r as l,N as v,u as f,j as e,b as m}from"./index-c667c2e2.js";import{A as y}from"./AdminSidebar-1e50e2a8.js";import"./index.esm-3b99841e.js";import"./index.esm-5b499a51.js";import"./index.esm-ac1cf2e2.js";import"./index.esm-7a656881.js";const b="/assets/noPhoto-b9ce81fe.png",p=t=>new Promise((s,d)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>{s(r.result)},r.onerror=u=>{d(u)}}),w=()=>{const[t,s]=l.useState({Product_Name:void 0,Description:void 0,Price:void 0,Category:"Muffins",Product_Photo:void 0,Rating:void 0,type:"Veg"}),{notification:d,checkUserAlreadyLogin:r}=l.useContext(v),u=f(),[h,g]=l.useState(""),i=a=>{const o=a.target.name,n=a.target.value;s({...t,[o]:n})},x=a=>{const o=a.target.files[0];g(o),P(o)},P=async a=>{const o=await p(a);s({...t,Product_Photo:o})};l.useEffect(()=>{console.log(h)},[h]);const j=async a=>{a.preventDefault();const o=await p(h);await m.post("/api/uploadImage",{image:o,folder:t.Category}).then(async n=>{alert("Image Uploaded Successfully"),await m.post("/api/saveProduct",{...t,Product_Photo:n.data}).then(c=>{c.data.result?(d(c.data.message,"Success"),u("/admin/product"),s({Product_Name:"",Description:"",Price:"",Category:"",Product_Photo:"",Rating:"",type:""})):d(c.data.message,"Un-Success")}).catch(c=>{console.log(c)})}).catch(n=>{console.log(n)})};return e.jsxs("div",{className:"admin-container",children:[e.jsx(y,{}),e.jsxs("main",{className:"product-management",children:[e.jsxs("section",{children:[t._id&&e.jsxs("strong",{children:["ID - ",t._id]}),e.jsx("img",{src:t.Product_Photo?t.Product_Photo:b,alt:"Product"}),(t.Product_Name||t.Price)&&e.jsxs("div",{className:"image-container",children:[e.jsx("p",{children:t.Product_Name}),e.jsxs("h3",{children:["â‚¹",t.Price?t.Price:"N/A"]})]})]}),e.jsx("article",{children:e.jsxs("form",{onSubmit:j,children:[e.jsx("h2",{children:"New Product"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Name",children:"Name"}),e.jsx("input",{required:!0,type:"text",placeholder:"Name",id:"Name",name:"Product_Name",value:t.Product_Name,onChange:i})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Description",children:"Description"}),e.jsx("textarea",{required:!0,name:"Description",id:"Description",cols:30,rows:5,placeholder:"Describe your issue",spellCheck:"false",value:t.Description,onChange:i})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Rating",children:"Food Rating"}),e.jsx("input",{required:!0,type:"number",placeholder:"Rating",name:"Rating",id:"Rating",value:t.Rating,onChange:i})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Price",children:"Price"}),e.jsx("input",{required:!0,type:"number",placeholder:"Price",id:"Price",name:"Price",value:t.Price,onChange:i})]}),e.jsxs("div",{id:"dropDowns",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",children:"Type"}),e.jsx("br",{}),e.jsxs("select",{name:"type",id:"select",defaultValue:t.type,onChange:i,children:[e.jsx("option",{value:"Vegan",children:"Vegan"}),e.jsx("option",{value:"Veg",children:"Vegetarian"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Category",children:"Category"})," ",e.jsx("br",{}),e.jsxs("select",{name:"Category",id:"select",defaultValue:t.Category,onChange:i,children:[e.jsx("option",{value:"Muffins",children:"Muffins"}),e.jsx("option",{value:"Pizza",children:"Pizza"}),e.jsx("option",{value:"Beverages",children:"Beverages"}),e.jsx("option",{value:"Smoothie",children:"Smoothie"}),e.jsx("option",{value:"SnacksAndSides",children:"Snacks and Sides"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"Product_Photo",children:"Photo"}),e.jsx("input",{required:!0,type:"file",accept:"image/*",name:"Product_Photo",id:"Product_Photo",onChange:x})]}),e.jsx("input",{type:"submit",value:"CREATE"})]})})]})]})};export{w as default};
