import{r as s,N as m,j as e,b as r}from"./index-c667c2e2.js";import{A as C}from"./AdminSidebar-1e50e2a8.js";import"./index.esm-3b99841e.js";import"./index.esm-5b499a51.js";import"./index.esm-ac1cf2e2.js";import"./index.esm-7a656881.js";const y=()=>{const[j,d]=s.useState(!1),{notification:a}=s.useContext(m),[n,l]=s.useState({Code:"",Discount_Allot:"",Description:""}),[p,u]=s.useState([]),c=async()=>{await r.get("/api/fetchCoupon").then(t=>{u(t.data.Data)}).catch(t=>{console.log(t)})};s.useEffect(()=>{c()},[]);const i=t=>{const o=t.target.name,x=t.target.value;l({...n,[o]:x})},h=async t=>{t.preventDefault(),n.Code.length>4&&n.Discount_Allot<50?await r.post("/api/newCouponAdd",n).then(o=>{o.data.result?a(o.data.message,"Success"):a(o.data.message,"Un-Success"),l({Code:"",Discount_Allot:"",Description:""})}).catch(o=>{console.log(o)}).finally(()=>{c()}):n.Code.length<4&&a("Coupon Length Should be greater than 4","Info")};return s.useEffect(()=>{d(!1)},[n]),e.jsxs("div",{className:"admin-container",children:[e.jsx(C,{}),e.jsxs("main",{className:"dashboard-app-container",children:[e.jsx("h1",{children:"Coupon"}),e.jsxs("section",{children:[e.jsxs("form",{className:"coupon-form",onSubmit:h,children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Coupon Code",name:"Code",value:n.Code,onChange:i,min:"4",maxLength:18}),e.jsx("input",{type:"number",placeholder:"Discount Allot",name:"Discount_Allot",value:n.Discount_Allot,onChange:i,max:50})]}),e.jsx("textarea",{type:"text",placeholder:"Enter Coupon Description",name:"Description",value:n.Description,onChange:i,required:!0,min:"15",maxLength:300}),e.jsx("button",{type:"submit",children:"Generate"})]}),e.jsxs("table",{class:"table",role:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Coupon Code"}),e.jsx("th",{children:"Discount Alloted"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Expired At"})]})}),e.jsx("tbody",{children:p.slice(0).reverse().map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.Code}),e.jsx("td",{children:t.Discount_Allot}),e.jsx("td",{children:t.Description}),e.jsx("td",{children:t.ExpiredAt})]}))})]})]})]})]})};export{y as default};
