import{r,d as N,U as k,N as L,j as t,R as F,b as p}from"./index-a958b4b2.js";import{$ as w}from"./module-a3a79733.js";import{a as I,b as R}from"./index.esm-871905a8.js";import{G as b}from"./index.esm-1e03394f.js";import{V as W,L as A}from"./veg-32021394.js";import{B as H}from"./Bags-f598ef11.js";import{C as $}from"./CustomerReview-bd027763.js";import{F as z}from"./Footer-8785bb3f.js";import{H as V}from"./Header-d9a2d421.js";import"./index.esm-bd03a2b8.js";import"./index.esm-8d092a6f.js";import"./index-7004f545.js";import"./index.esm-33813983.js";import"./index.esm-4ab3e14c.js";function E(e){return b({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 11h-12c-1.104 0-2 .896-2 2s.896 2 2 2h12c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(e)}function M(e){return b({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 10h-4v-4c0-1.104-.896-2-2-2s-2 .896-2 2l.071 4h-4.071c-1.104 0-2 .896-2 2s.896 2 2 2l4.071-.071-.071 4.071c0 1.104.896 2 2 2s2-.896 2-2v-4.071l4 .071c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(e)}const G=()=>{var v,S;const[e,n]=r.useState({}),[o,c]=r.useState("Show"),[d,x]=r.useState(!1),[P,y]=r.useState(null);let h=N().productID;const{userData:l,fetchBag:C,fetchWishList:_,addToWishlist:B,wishlistData:m}=r.useContext(k),{notification:g}=r.useContext(L),j=async()=>{c("Show");let s=l==null?void 0:l._id;await p.get(`/api/fetchProductDetails?_id=${h}&user_id=${s}`).then(a=>{n({...a.data.data,Sizes:a.data.Sizes,total:a.data.total}),c("Hide"),y(a.data.data.Reviews),_()}).catch(a=>{c("LoadBtnShow"),console.log(a)})},f=(s,a)=>{if(a>=0&&a<=20){let i=e.Sizes.map(u=>(u.name===s&&(u.counter=a),u)),T=i[0].price*i[0].counter+i[1].price*i[1].counter+i[2].price*i[2].counter;n({...e,Sizes:i,total:T})}},D=async()=>{x(!0),await p.post("/api/updateBag",{productID:e._id,SmallCount:e.Sizes[0].counter,MediumCount:e.Sizes[1].counter,LargeCount:e.Sizes[2].counter}).then(s=>{g(s.data,"Success"),C()}).catch(s=>{g(s.response.data.msg2,"Warning")}).finally(()=>{x(!1)})};return r.useEffect(()=>{h&&j()},[h,l]),t.jsxs(F.Fragment,{children:[t.jsx(H,{}),o==="Hide"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"products product-board",children:[t.jsxs("div",{className:"product-card",children:[t.jsx("div",{id:"product-img-BTN1",children:t.jsxs("div",{id:"onhover-showBTN1",children:[t.jsx("p",{id:"wishlist-para",children:"WISHLIST"}),t.jsx(I,{onClick:()=>B(e._id),className:m!=null&&m.find(s=>s.productID===e._id)?"active-Heart heart":"heart"})]})}),t.jsx("img",{className:"product-image",src:e.Product_Photo,alt:e.Product_Photo,loading:"lazy"}),t.jsxs("div",{className:"product-info",children:[t.jsx("h5",{className:"product-name",children:e.Product_Name}),t.jsxs("p",{className:"product-price",children:["₹",e.Price]}),t.jsxs("div",{className:"product-star",children:[t.jsx(R,{id:"A"}),t.jsxs("p",{className:"product-rating",children:[(v=Number(e.Rating))==null?void 0:v.toFixed(1),"/5.0"]})]})]})]},e._id),t.jsxs("div",{className:"product-board-desc",children:[t.jsxs("h1",{children:[e.Product_Name,e.type==="Veg"?t.jsx("img",{id:"veg",src:W,alt:"Veg"}):t.jsx(A,{id:"LuVegan"})]}),t.jsx("p",{children:e.Description}),t.jsxs("div",{className:"product-board-sizes",children:[t.jsx("h2",{children:"Select Sizes"}),t.jsx("div",{className:"sizes",children:(S=e.Sizes)==null?void 0:S.map((s,a)=>t.jsxs("div",{id:s.name,children:[t.jsx("img",{src:e.Product_Photo,alt:e.Product_Photo}),t.jsx("p",{children:s.name}),t.jsxs("p",{className:"product-price",children:["₹",s.price]}),t.jsxs("div",{className:"counter",children:[t.jsx("button",{className:"btn btn--minus",onClick:()=>{f(s.name,s.counter-1)},children:t.jsx(E,{})}),t.jsx("p",{children:s.name}),t.jsx("span",{children:s.counter}),t.jsx("button",{className:"btn btn--plus",onClick:()=>{f(s.name,s.counter+1)},children:t.jsx(M,{})})]})]},a))}),t.jsxs("div",{id:"totalorder",children:[t.jsx("div",{className:"total",children:t.jsxs("h1",{children:["Total Amount ₹ ",e.total]})}),d?t.jsx("button",{className:"order",children:t.jsx(w,{height:"18",width:"18",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:8,strokeWidthSecondary:8})}):t.jsx("button",{className:"order",style:e.total>0?{}:{background:"grey"},onClick:D,children:"Add to Bag"})]})]})]})]}),t.jsx($,{Review:P})]}):t.jsx(t.Fragment,{children:o==="Show"?t.jsx(w,{height:"40",width:"60",color:"white",wrapperStyle:{},wrapperClass:"products loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:4,strokeWidthSecondary:4}):t.jsxs("div",{className:"products loadingBTN",children:[t.jsx("p",{children:"Something went wrong"}),t.jsx("button",{onClick:j,children:"Try again"})]})})]})},it=()=>{const[e,n]=r.useState({});let o=N().productID;const c=async()=>{await p.get(`/api/fetchProductDetails?_id=${o}`).then(d=>{n(d.data.data)}).catch(d=>{console.log(d)})};return r.useEffect(()=>{o&&c()},[o]),t.jsxs(t.Fragment,{children:[t.jsx(V,{}),t.jsx(G,{}),t.jsx(z,{})]})};export{it as default};
