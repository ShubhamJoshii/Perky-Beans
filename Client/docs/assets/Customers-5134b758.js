import{r as i,j as e,b as x}from"./index-dbb2527e.js";import{A as u}from"./AdminSidebar-d99b7d42.js";import{a as b,P}from"./Pagination-c732a249.js";import{O as C}from"./Blocks-0e59252c.js";import"./index.esm-7735cdba.js";import"./index.esm-d3697b5c.js";import"./index.esm-c62830c2.js";const k=()=>{const[t,j]=i.useState();i.useState(!1);const[c,n]=i.useState(!0),[r,m]=i.useState(1),p=async(s,a)=>{n(!0),await x.post("/api/updateUserRole",{_id:s,Role:a}).then(o=>{o.data.result&&h()}).catch(o=>{console.log(o)}).finally(()=>{n(!1)})},h=async()=>{n(!0),await x.get("/api/fetchUsers").then(s=>{var a;(a=s.data)!=null&&a.data&&j(s.data.data)}).catch(s=>{console.log("Error")}).finally(()=>{n(!1)})};i.useEffect(()=>{h()},[]);const l=8,f=Math.ceil((t==null?void 0:t.length)/l),g=s=>{m(s)},d=t==null?void 0:t.slice((r-1)*l,r*l);return e.jsxs("div",{className:"admin-container",children:[e.jsx(u,{}),e.jsxs("div",{className:"dashboard-product-box",children:[e.jsx("h2",{class:"heading",children:"Products"}),e.jsxs("table",{class:"table",role:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Email Verified"}),e.jsx("th",{children:"Admins"})]})}),c?e.jsx("td",{colSpan:"5",children:e.jsx(C,{height:"40",width:"60",color:"black",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"black",strokeWidth:4,strokeWidthSecondary:4})}):e.jsxs("tbody",{children:[d==null?void 0:d.map(s=>{const a=s.Role==="Admin";return e.jsxs("tr",{children:[e.jsx("td",{children:s.Full_Name}),e.jsx("td",{children:s.Email}),e.jsx("td",{children:s.Role}),e.jsx("td",{children:s.isVerified?e.jsx("p",{id:"verified",children:"Verified"}):e.jsx("p",{id:"not-verified",children:"Not-Verified"})}),e.jsx("td",{children:e.jsx(b,{onChange:()=>p(s._id,s.Role),checked:a,className:"react-switch"})})]})}),!t&&e.jsx("p",{children:"No User Found"})]})]}),!c&&e.jsx(P,{currentPage:r,totalPages:f,onPageChange:g})]})]})};export{k as default};
