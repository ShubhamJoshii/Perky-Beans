import{r as t,U as y,N as A,j as e,a as H,b,d as W,e as U,R as V}from"./index-ed1235f5.js";import{B as E}from"./Bags-33ce7a04.js";import{F as O}from"./Footer-ba6025ba.js";import{H as G}from"./Header-47268997.js";import{a as q,b as z,c as D,d as J}from"./index.esm-51f27fd1.js";import{$ as K}from"./module-6d8f6cfb.js";import{a as M}from"./index.esm-06185452.js";import{V as Q,L as X}from"./veg-5efd9f18.js";import{S as o}from"./index-877835f7.js";/* empty css                 */import{S as Y}from"./SearchBar-d2db123a.js";import"./index.esm-5e76bc58.js";import"./index.esm-9f69718b.js";import"./index.esm-7e255ccb.js";import"./index.esm-9034f3f4.js";import"./index-f2e1e368.js";import"./index.esm-e430d503.js";const Z=({product:s,category:r})=>{const{fetchBag:d,addToWishlist:m,bagData:i,wishlistData:h}=t.useContext(y),{notification:c}=t.useContext(A);let j;r!=null&&r.categoryID?j=`./${s==null?void 0:s._id}`:j=`./${s==null?void 0:s.Category}/${s==null?void 0:s._id}`;const P=async(n,f=0,C=1,F=0)=>{i.find(l=>l.productID===n)?await b.post("/api/removeFromBag",{productID:n}).then(l=>{c(l.data,"Success"),d()}):await b.post("/api/updateBag",{productID:n,SmallCount:f,MediumCount:C,LargeCount:F}).then(l=>{c(l.data,"Success"),d()}).catch(l=>{c(l.response.data.msg2,"Warning")})};return e.jsxs("div",{className:"product-card",children:[e.jsx("div",{id:"product-type",children:s!=null&&s.type?e.jsx(e.Fragment,{children:(s==null?void 0:s.type)==="Veg"?e.jsx("img",{id:"veg",src:Q,alt:"Veg"}):e.jsx(X,{id:"LuVegan"})}):e.jsx(o,{})}),e.jsx("div",{id:"product-img-BTN1",children:e.jsx("div",{id:"onhover-showBTN1",children:s!=null&&s.Product_Name?e.jsxs(e.Fragment,{children:[e.jsx("p",{id:"wishlist-para",children:"WISHLIST"}),e.jsx(q,{onClick:()=>m(s==null?void 0:s._id),className:h.find(n=>n.productID===(s==null?void 0:s._id))?"active-Heart heart":" heart"})]}):e.jsx(o,{})})}),e.jsx("div",{id:"product-img-BTN2",children:e.jsx("div",{id:"onhover-showBTN2",children:s!=null&&s.Product_Name?e.jsxs(e.Fragment,{children:[e.jsx("p",{id:"bag-para",children:"BAG"}),e.jsx(M,{onClick:()=>P(s==null?void 0:s._id),className:i.find(n=>n.productID===(s==null?void 0:s._id))?"active-Bags bag":"bag"})]}):e.jsx(o,{})})}),e.jsxs(H,{to:j,id:"Product-Image-Link",onClick:()=>window.scrollTo({top:0,left:0,behavior:"smooth"}),children:[s!=null&&s.Product_Photo?e.jsx("img",{src:s==null?void 0:s.Product_Photo,alt:s==null?void 0:s.Product_Name,className:"product-image"}):e.jsx(o,{className:"skeleton"}),e.jsxs("div",{className:"product-info",children:[e.jsx("h5",{className:"product-name",children:(s==null?void 0:s.Product_Name)||e.jsx(o,{})}),e.jsx("p",{className:"product-desc",children:s!=null&&s.Description?e.jsxs(e.Fragment,{children:[s==null?void 0:s.Description.slice(0,60),"..."]}):e.jsx(o,{count:3})}),e.jsx("p",{className:"product-price",children:s!=null&&s.Price?e.jsxs(e.Fragment,{children:["â‚¹",s==null?void 0:s.Price]}):e.jsx(o,{})}),e.jsx("div",{id:"rating",children:s!=null&&s.Rating?e.jsxs(e.Fragment,{children:[e.jsx(z,{id:"A"}),e.jsxs("p",{className:"product-rating",children:[Number(s==null?void 0:s.Rating).toFixed(1),"/5.0"]})]}):e.jsx(o,{})})]})]})]})},p=()=>{let r=Array.from({length:24},(a,g)=>{});const[d,m]=t.useState(r),[i,h]=t.useState(1),[c,j]=t.useState(W()),{fetchBag:P,fetchWishList:n,addToWishlist:f,bagData:C,wishlistData:F}=t.useContext(y),[L,l]=t.useState([]),[B,v]=t.useState("Hide"),[N,T]=t.useState(1),S=U(),$=async()=>{var g,k;m(r);let a=S.state;if(S.state!==null&&(a!=null&&a.Category||a!=null&&a.Ingredients||a!=null&&a.PriceRange||a!=null&&a.RatingUP)){let x=(g=a==null?void 0:a.Category)==null?void 0:g.toLocaleString(),R=(k=a==null?void 0:a.Ingredients)==null?void 0:k.toLocaleString(),I=a==null?void 0:a.PriceRange,_=a==null?void 0:a.RatingUP;await b.get(`/api/fetchProduct?page=${i}&limit=24&Category=${x}&Ingredients=${R}&PriceRange=${I}&RatingUP=${_}&Available=true`).then(w=>{m(w.data.data),T(w.data.TotalproductsPages),w.data.TotalproductsPages<24*i&&h(1),v("Hide"),P(),n()}).catch(w=>{v("LoadBtnShow"),console.log("Error")})}else await b.get(`/api/fetchProduct?page=${i}&limit=24&Available=true`).then(x=>{m(x.data.data),T(x.data.TotalproductsPages),v("Hide"),P(),n()}).catch(x=>{v("LoadBtnShow"),console.log("Error")})};return t.useEffect(()=>{$()},[S,L,i]),e.jsx(e.Fragment,{children:B==="Hide"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"products",children:d.map((a,g)=>e.jsx(V.Fragment,{children:e.jsx(Z,{product:a,category:c})},g))}),e.jsx("div",{id:"pagination",children:N.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"Pages",id:i===1?"non-active-side-btn":"",onClick:()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),i!==1&&h(i-1)},children:e.jsx(D,{})}),N.map((a,g)=>e.jsx("div",{onClick:()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),h(a)},className:g+1===i?"activePage Pages":"Pages",children:a},g)),e.jsx("div",{className:"Pages",id:i===N.length?"non-active-side-btn":"",onClick:()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),i!==N.length&&h(i+1)},children:e.jsx(J,{})})]})})]}):e.jsx(e.Fragment,{children:B==="Show"?e.jsx(K,{height:"40",width:"60",color:"white",wrapperStyle:{},wrapperClass:"products loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:4,strokeWidthSecondary:4}):e.jsxs("div",{className:"products loadingBTN",children:[e.jsx("p",{children:"Something went wrong"}),e.jsx("button",{onClick:$,children:"Try again"})]})})})},Pe=()=>e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsx(E,{}),e.jsx(Y,{position:"100",currPlace:"ProductPage"}),e.jsx(p,{}),e.jsx(O,{})]});export{Pe as default};
