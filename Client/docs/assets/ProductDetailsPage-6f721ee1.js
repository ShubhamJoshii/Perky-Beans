import{r as o,d as N,U as y,N as F,j as t,R as L,b as p}from"./index-8034329b.js";import{P as v,F as W}from"./Footer-50ddd481.js";import{B as S}from"./Bags-1127a5c3.js";import{c as D,d as T}from"./index.esm-525efdad.js";import{G as b}from"./index.esm-3007911d.js";import{V as A,L as k}from"./veg-c6a25b47.js";import{C as M}from"./CustomerReview-0ac0fe8a.js";import V from"./PageNotFound-b6d5b6fc.js";import{H as E}from"./Header-f9b55ae4.js";import"./index.esm-daad8c6f.js";import"./index.esm-f19b925b.js";import"./index.esm-e4be5a7f.js";import"./index.esm-4a30bd17.js";function H(r){return b({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 11h-12c-1.104 0-2 .896-2 2s.896 2 2 2h12c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(r)}function R(r){return b({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 10h-4v-4c0-1.104-.896-2-2-2s-2 .896-2 2l.071 4h-4.071c-1.104 0-2 .896-2 2s.896 2 2 2l4.071-.071-.071 4.071c0 1.104.896 2 2 2s2-.896 2-2v-4.071l4 .071c1.104 0 2-.896 2-2s-.896-2-2-2z"}}]})(r)}const C=()=>{var j;const[r,l]=o.useState(0),[i,u]=o.useState(0),[d,x]=o.useState(0),[s,I]=o.useState({});let g=N().productID;const{userData:a,setUserData:U}=o.useContext(y),{checkUserAlreadyLogin:m,notification:h}=o.useContext(F);o.useEffect(()=>{a==null||a.Bag.find(e=>{e.productID===s._id&&(l(e.SmallCount),u(e.MediumCount),x(e.LargeCount))})},[a]),o.useEffect(()=>{I(v.find(e=>e._id===g))},[g]);const n=[{id:1,name:"regular",price:(s==null?void 0:s.Price)-50,counter:r,setCounter:l},{id:2,name:"medium",price:s==null?void 0:s.Price,counter:i,setCounter:u},{id:3,name:"large",price:(s==null?void 0:s.Price)+50,counter:d,setCounter:x}],P=n[0].price*n[0].counter+n[1].price*n[1].counter+n[2].price*n[2].counter,B=async e=>{a?a.Wishlist.find(c=>c.productID===e)?await p.post("/api/removefromWishlist",{productID:e}).then(c=>{m()}):await p.post("/api/addToWishlist",{productID:e}).then(c=>{m()}):h("Please Login Before Adding to Wishlist","Warning")},w=async e=>{if(a){let f=a.Bag.find(c=>c.productID===e);r||i||d>0?f?await p.post("/api/updateBag",{productID:e,SmallCount:r,MediumCount:i,LargeCount:d}).then(c=>{m()}):await p.post("/api/addtoBag",{productID:e,SmallCount:r,MediumCount:i,LargeCount:d}).then(c=>{m()}):h("firstly, Select Size","Warning")}else h("Please Login Before Adding to Bag","Warning")};return t.jsxs(L.Fragment,{children:[t.jsx(S,{}),s&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"products product-board",children:[t.jsxs("div",{className:"product-card",children:[t.jsx("div",{id:"product-img-BTN1",children:t.jsxs("div",{id:"onhover-showBTN1",children:[t.jsx("p",{id:"wishlist-para",children:"WISHLIST"}),t.jsx(D,{onClick:()=>B(s._id),className:a!=null&&a.Wishlist.find(e=>e.productID===s._id)?"active-Heart heart":"heart"})]})}),t.jsx("img",{className:"product-image",src:s.Image,alt:s.Name,loading:"lazy"}),t.jsxs("div",{className:"product-info",children:[t.jsx("h5",{className:"product-name",children:s.Name}),t.jsxs("p",{className:"product-price",children:["₹",s.Price]}),t.jsxs("div",{className:"product-star",children:[t.jsx(T,{id:"A"}),t.jsxs("p",{className:"product-rating",children:[(j=s.Star)==null?void 0:j.toFixed(1),"/5.0"]})]})]})]},s._id),t.jsxs("div",{className:"product-board-desc",children:[t.jsxs("h1",{children:[s.Name,s.type==="Veg"?t.jsx("img",{id:"veg",src:A,alt:"Veg"}):t.jsx(k,{id:"LuVegan"})]}),t.jsx("p",{children:s.Desc}),t.jsxs("div",{className:"product-board-sizes",children:[t.jsx("h2",{children:"Select Sizes"}),t.jsx("div",{className:"sizes",children:n.map(e=>t.jsxs("div",{id:e.name,children:[t.jsx("img",{src:s.Image,alt:s.Name}),t.jsx("p",{children:e.name}),t.jsxs("p",{className:"product-price",children:["₹",e.price]}),t.jsxs("div",{className:"counter",children:[t.jsx("button",{className:"btn btn--minus",onClick:()=>{e.counter>0?e.setCounter(e.counter-1):e.setCounter(e.counter)},children:t.jsx(H,{})}),t.jsx("p",{children:e.name}),t.jsx("span",{children:e.counter}),t.jsx("button",{className:"btn btn--plus",onClick:()=>{e.counter<9?e.setCounter(e.counter+1):e.setCounter(e.counter)},children:t.jsx(R,{})})]})]},e.id))}),t.jsxs("div",{id:"totalorder",children:[t.jsx("div",{className:"total",children:t.jsxs("h1",{children:["Total Amount ₹ ",P]})}),t.jsx("button",{className:"order",style:r||i||d>0?{}:{background:"grey"},onClick:()=>w(s._id),children:"Add to Bag"})]})]})]})]})})]})},et=()=>{const[r,l]=o.useState({});let i=N().productID;return o.useEffect(()=>{l(v.find(u=>u._id===i))},[i]),t.jsxs(t.Fragment,{children:[t.jsx(E,{}),t.jsx(S,{}),r&&t.jsx(C,{})?t.jsxs(t.Fragment,{children:[t.jsx(C,{}),t.jsx(M,{})]}):t.jsx(V,{}),t.jsx(W,{})]})};export{et as default};
