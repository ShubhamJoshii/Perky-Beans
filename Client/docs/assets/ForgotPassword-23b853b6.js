import{r as l,N as j,u as y,j as e,b as m}from"./index-47fdb7de.js";import{H as E,c as f}from"./Header-b10e3993.js";import{O as p}from"./Blocks-c5b2fede.js";import"./index.esm-1cfc3c5b.js";const T=()=>{const[s,n]=l.useState({Email:"",OTP:"",Password:"",Confirm_Password:""}),[h,t]=l.useState(!1),[d,c]=l.useState(0),{notification:i}=l.useContext(j),P=y(),u=async a=>{a.preventDefault(),t(!0),await m.post("/api/forgetPassword/sendOTP",{Email:s.Email}).then(r=>{var o,w;i((o=r.data)==null?void 0:o.message,"Success"),(w=r.data)!=null&&w.status&&c(1),setTimeout(()=>t(!1),1e3)}).catch(()=>{t(!1)})},g=async a=>{a.preventDefault(),t(!0),await m.post("/api/forgetPassword/otpVerify",{Email:s.Email,OTP:s.OTP}).then(r=>{var o;i((o=r.data)==null?void 0:o.message,"Success"),r.data.status&&c(2),setTimeout(()=>{t(!1)},1e3)}).catch(()=>t(!1))},x=async a=>{a.preventDefault(),s.Password===s.Confirm_Password&&s.Confirm_Password.length>=8?(t(!0),await m.post("/api/forgetPassword/updatePassword",{Email:s.Email,OTP:s.OTP,Password:s.Password,Confirm_Password:s.Confirm_Password}).then(r=>{var o;i(r.data.message,"Success"),(o=r.data)!=null&&o.status&&P("/auth/login"),setTimeout(()=>t(!1),1e3)}).catch(()=>t(!1))):s.Password!==s.Confirm_Password?i("User Password and Confirm Password not Matched","Warning"):s.Password.length<8&&i("Password length should be greater than and equal to 8","Warning")};return l.useEffect(()=>{t(!1)},[d]),e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs("div",{className:"forgot-password-form",children:[e.jsx("h1",{children:"Forgot Password"}),e.jsx("div",{className:"instructions-box",children:e.jsx("p",{className:"instructions",children:"Enter your email address that you used to register. We'll send you an email with a link to reset your password. If you donâ€™t see the email, check other places it might be, like your junk, spam, social, or other folders."})}),d===0&&e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Enter your email",onChange:a=>n({Email:a.target.value})})]}),h?e.jsx(p,{height:"24",width:"24",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx("input",{type:"submit",value:"SEND OTP",className:"otp-link"})]}),d===1&&e.jsxs("form",{onSubmit:g,children:[e.jsxs("span",{children:[e.jsx(f,{})," ",s.Email," ",e.jsx("pre",{onClick:()=>c(0),children:"(edit)"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"OTP:"}),e.jsx("input",{type:"number",id:"otp",name:"otp",placeholder:"Enter OTP",onChange:a=>n({...s,OTP:a.target.value})}),e.jsx("p",{id:"resendOTP",onClick:u,children:"RESEND OTP"})]}),h?e.jsx(p,{height:"24",width:"24",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx("input",{type:"submit",value:"VERIFY OTP",className:"otp-link"})]}),d===2&&e.jsxs("form",{onSubmit:x,children:[e.jsxs("span",{children:[e.jsx(f,{})," ",s.Email," ",e.jsx("pre",{onClick:()=>c(0),children:"(edit)"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Enter New Password:"}),e.jsx("input",{type:"text",id:"password",name:"Password",placeholder:"Enter Password",onChange:a=>n({...s,Password:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Enter Confirm Password:"}),e.jsx("input",{type:"text",id:"Confirm_password",name:"Confirm_Password",placeholder:"Enter Confirm Password",onChange:a=>n({...s,Confirm_Password:a.target.value})})]}),h?e.jsx(p,{height:"24",width:"24",color:"white",wrapperStyle:{},wrapperClass:"loading",visible:!0,ariaLabel:"oval-loading",secondaryColor:"white",strokeWidth:6,strokeWidthSecondary:6}):e.jsx("input",{type:"submit",value:"UPDATE PASSWORD",className:"otp-link"})]})]})]})};export{T as default};
